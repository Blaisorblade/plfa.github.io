<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Adequacy: of denotational semantics with respect to operational semantics | Programming Language Foundations in Agda
</title><!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Adequacy: of denotational semantics with respect to operational semantics" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Programming Language Foundations in Agda" />
<meta property="og:description" content="Programming Language Foundations in Agda" />
<link rel="canonical" href="https://plfa.github.io/Adequacy/" />
<meta property="og:url" content="https://plfa.github.io/Adequacy/" />
<meta property="og:site_name" content="Programming Language Foundations in Agda" />
<script type="application/ld+json">
{"description":"Programming Language Foundations in Agda","@type":"WebPage","url":"https://plfa.github.io/Adequacy/","headline":"Adequacy: of denotational semantics with respect to operational semantics","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"></head>
<body><header class="site-header" role="banner">

    <div class="wrapper">

        <a class="site-title" href="/">Programming Language Foundations in Agda
</a>

        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="/">Table of Contents</a>
                <a class="page-link" href="/GettingStarted/">Getting Started</a>
            </div>
        </nav>

    </div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
      <h1 class="post-title">Adequacy: of denotational semantics with respect to operational semantics</h1>
  </header>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/Soundness/">Prev</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/Adequacy.lagda">Source</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/Acknowledgements/">Next</a>
    
</p>


  <div class="post-content">
    <pre class="Agda"><a id="206" class="Keyword">module</a> <a id="213" href="/Adequacy/" class="Module">plfa.Adequacy</a> <a id="227" class="Keyword">where</a></pre>

<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="270" class="Keyword">open</a> <a id="275" class="Keyword">import</a> <a id="282" href="/Untyped/" class="Module">plfa.Untyped</a>
  <a id="297" class="Keyword">using</a> <a id="303" class="Symbol">(</a><a id="304" href="/Untyped/#2980" class="Datatype">Context</a><a id="311" class="Symbol">;</a> <a id="313" href="/Untyped/#4150" class="Datatype Operator">_⊢_</a><a id="316" class="Symbol">;</a> <a id="318" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="319" class="Symbol">;</a> <a id="321" href="/Untyped/#3365" class="Datatype Operator">_∋_</a><a id="324" class="Symbol">;</a> <a id="326" href="/Untyped/#3002" class="InductiveConstructor">∅</a><a id="327" class="Symbol">;</a> <a id="329" href="/Untyped/#3018" class="InductiveConstructor Operator">_,_</a><a id="332" class="Symbol">;</a> <a id="334" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="335" class="Symbol">;</a> <a id="337" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="339" class="Symbol">;</a> <a id="341" href="/Untyped/#4186" class="InductiveConstructor Operator">`_</a><a id="343" class="Symbol">;</a> <a id="345" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a><a id="347" class="Symbol">;</a> <a id="349" href="/Untyped/#4298" class="InductiveConstructor Operator">_·_</a><a id="352" class="Symbol">;</a> <a id="354" href="/Untyped/#6171" class="Function">rename</a><a id="360" class="Symbol">;</a> <a id="362" href="/Untyped/#6931" class="Function">subst</a><a id="367" class="Symbol">;</a>
         <a id="378" href="/Untyped/#11252" class="Datatype Operator">_—↠_</a><a id="382" class="Symbol">;</a> <a id="384" href="/Untyped/#11358" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="391" class="Symbol">;</a> <a id="393" href="/Untyped/#10070" class="Datatype Operator">_—→_</a><a id="397" class="Symbol">;</a> <a id="399" href="/Untyped/#10120" class="InductiveConstructor">ξ₁</a><a id="401" class="Symbol">;</a> <a id="403" href="/Untyped/#10230" class="InductiveConstructor">ξ₂</a><a id="405" class="Symbol">;</a> <a id="407" href="/Untyped/#10336" class="InductiveConstructor">β</a><a id="408" class="Symbol">;</a> <a id="410" href="/Untyped/#10444" class="InductiveConstructor">ζ</a><a id="411" class="Symbol">;</a> <a id="413" href="/Untyped/#9368" class="InductiveConstructor">ap</a><a id="415" class="Symbol">;</a> <a id="417" href="/Untyped/#5845" class="Function">ext</a><a id="420" class="Symbol">;</a> <a id="422" href="/Untyped/#6623" class="Function">exts</a><a id="426" class="Symbol">;</a> <a id="428" href="/Untyped/#7475" class="Function Operator">_[_]</a><a id="432" class="Symbol">;</a> <a id="434" href="/Untyped/#7359" class="Function">subst-zero</a><a id="444" class="Symbol">)</a>
  <a id="448" class="Keyword">renaming</a> <a id="457" class="Symbol">(</a><a id="458" href="/Untyped/#11302" class="InductiveConstructor Operator">_∎</a> <a id="461" class="Symbol">to</a> <a id="464" href="/Untyped/#11302" class="InductiveConstructor Operator">_[]</a><a id="467" class="Symbol">)</a>
<a id="469" class="Keyword">open</a> <a id="474" class="Keyword">import</a> <a id="481" href="/Denotational/" class="Module">plfa.Denotational</a>
<a id="499" class="Keyword">open</a> <a id="504" class="Keyword">import</a> <a id="511" href="/Soundness/" class="Module">plfa.Soundness</a>

<a id="527" class="Keyword">import</a> <a id="534" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="572" class="Symbol">as</a> <a id="575" class="Module">Eq</a>
<a id="578" class="Keyword">open</a> <a id="583" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="586" class="Keyword">using</a> <a id="592" class="Symbol">(</a><a id="593" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">_≡_</a><a id="596" class="Symbol">;</a> <a id="598" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#660" class="Function Operator">_≢_</a><a id="601" class="Symbol">;</a> <a id="603" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="607" class="Symbol">;</a> <a id="609" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#887" class="Function">trans</a><a id="614" class="Symbol">;</a> <a id="616" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a><a id="619" class="Symbol">;</a> <a id="621" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a><a id="625" class="Symbol">;</a> <a id="627" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">cong₂</a><a id="632" class="Symbol">;</a> <a id="634" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1274" class="Function">cong-app</a><a id="642" class="Symbol">)</a>
<a id="644" class="Keyword">open</a> <a id="649" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#3975" class="Module">Eq.≡-Reasoning</a> <a id="664" class="Keyword">using</a> <a id="670" class="Symbol">(</a><a id="671" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin_</a><a id="677" class="Symbol">;</a> <a id="679" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">_≡⟨⟩_</a><a id="684" class="Symbol">;</a> <a id="686" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">_≡⟨_⟩_</a><a id="692" class="Symbol">;</a> <a id="694" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">_∎</a><a id="696" class="Symbol">)</a>
<a id="698" class="Keyword">open</a> <a id="703" class="Keyword">import</a> <a id="710" href="https://agda.github.io/agda-stdlib/Data.Product.html" class="Module">Data.Product</a> <a id="723" class="Keyword">using</a> <a id="729" class="Symbol">(</a><a id="730" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">_×_</a><a id="733" class="Symbol">;</a> <a id="735" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#69" class="Record">Σ</a><a id="736" class="Symbol">;</a> <a id="738" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ-syntax</a><a id="746" class="Symbol">;</a> <a id="748" href="https://agda.github.io/agda-stdlib/Data.Product.html#881" class="Function">∃</a><a id="749" class="Symbol">;</a> <a id="751" href="https://agda.github.io/agda-stdlib/Data.Product.html#942" class="Function">∃-syntax</a><a id="759" class="Symbol">;</a> <a id="761" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#155" class="Field">proj₁</a><a id="766" class="Symbol">;</a> <a id="768" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#167" class="Field">proj₂</a><a id="773" class="Symbol">)</a>
  <a id="777" class="Keyword">renaming</a> <a id="786" class="Symbol">(</a><a id="787" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">_,_</a> <a id="791" class="Symbol">to</a> <a id="794" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="799" class="Symbol">)</a>
<a id="801" class="Keyword">open</a> <a id="806" class="Keyword">import</a> <a id="813" href="https://agda.github.io/agda-stdlib/Data.Sum.html" class="Module">Data.Sum</a>
<a id="822" class="Keyword">open</a> <a id="827" class="Keyword">import</a> <a id="834" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="851" class="Keyword">using</a> <a id="857" class="Symbol">(</a><a id="858" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬_</a><a id="860" class="Symbol">)</a>
<a id="862" class="Keyword">open</a> <a id="867" class="Keyword">import</a> <a id="874" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="900" class="Keyword">using</a> <a id="906" class="Symbol">(</a><a id="907" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a><a id="920" class="Symbol">)</a>
<a id="922" class="Keyword">open</a> <a id="927" class="Keyword">import</a> <a id="934" href="https://agda.github.io/agda-stdlib/Data.Empty.html" class="Module">Data.Empty</a> <a id="945" class="Keyword">using</a> <a id="951" class="Symbol">(</a><a id="952" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a><a id="958" class="Symbol">)</a> <a id="960" class="Keyword">renaming</a> <a id="969" class="Symbol">(</a><a id="970" href="https://agda.github.io/agda-stdlib/Data.Empty.html#243" class="Datatype">⊥</a> <a id="972" class="Symbol">to</a> <a id="975" href="https://agda.github.io/agda-stdlib/Data.Empty.html#243" class="Datatype">Bot</a><a id="978" class="Symbol">)</a>
<a id="980" class="Keyword">open</a> <a id="985" class="Keyword">import</a> <a id="992" href="https://agda.github.io/agda-stdlib/Data.Unit.html" class="Module">Data.Unit</a>
<a id="1002" class="Keyword">open</a> <a id="1007" class="Keyword">import</a> <a id="1014" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1031" class="Keyword">using</a> <a id="1037" class="Symbol">(</a><a id="1038" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#534" class="Datatype">Dec</a><a id="1041" class="Symbol">;</a> <a id="1043" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a><a id="1046" class="Symbol">;</a> <a id="1048" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a><a id="1050" class="Symbol">)</a>
<a id="1052" class="Keyword">open</a> <a id="1057" class="Keyword">import</a> <a id="1064" href="https://agda.github.io/agda-stdlib/Function.html" class="Module">Function</a> <a id="1073" class="Keyword">using</a> <a id="1079" class="Symbol">(</a><a id="1080" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">_∘_</a><a id="1083" class="Symbol">)</a></pre>

<p>Having proved a preservation property in the last chapter, a natural
next step would be to prove progress. That is, to prove a property
of the form</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>If γ ⊢ M ↓ v, then either M is a lambda abstraction or M —→ N for some N.
</code></pre></div></div>

<p>Such a property would tell us that having a denotation implies either
reduction to normal form or divergence. This is indeed true, but we
can prove a much stronger property! In fact, having a denotation that
is a function value (not <code class="highlighter-rouge">⊥</code>) implies reduction to a lambda
abstraction (no divergence).</p>

<p>This stronger property, reformulated a bit, is known as <em>adequacy</em>.
That is, if a term <code class="highlighter-rouge">M</code> is denotationally equal to a lambda abstraction,
then <code class="highlighter-rouge">M</code> reduces to a lambda abstraction.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ℰ M ≃ ℰ (ƛ N)  implies M —↠ ƛ N' for some N'
</code></pre></div></div>

<p>Recall that <code class="highlighter-rouge">ℰ M ≃ ℰ (ƛ N)</code> is equivalent to saying that
<code class="highlighter-rouge">γ ⊢ M ↓ (v ↦ w)</code> for some <code class="highlighter-rouge">v</code> and <code class="highlighter-rouge">w</code>. We will show that
<code class="highlighter-rouge">γ ⊢ M ↓ (v ↦ w)</code> implies reduction a lambda abstraction.</p>

<p>It is well known that a term can reduce to a lambda abstraction using
full β reduction if and only if it can reduce to a lambda abstraction
using the call-by-name reduction strategy. So we shall prove that
<code class="highlighter-rouge">γ ⊢ M ↓ (v ↦ w)</code> implies that <code class="highlighter-rouge">M</code> halts under call-by-name evaluation,
which we define with a big-step semantics written <code class="highlighter-rouge">γ' ⊢ M ⇓ c</code>, where
<code class="highlighter-rouge">c</code> is a closure (a term paired with an environment) and <code class="highlighter-rouge">γ'</code> is an
environment that maps variables to closures</p>

<p>So we will show that <code class="highlighter-rouge">γ ⊢ M ↓ (v ↦ w)</code> implies <code class="highlighter-rouge">γ' ⊢ M ⇓ c</code>,
provided <code class="highlighter-rouge">γ</code> and <code class="highlighter-rouge">γ'</code> are appropriate related.  The proof will
be an induction on the derivation of <code class="highlighter-rouge">γ ⊢ M ↓ v</code>, and to
strengthen the induction hypothesis, we will relate semantic values to
closures using a <em>logical relation</em> <code class="highlighter-rouge">𝕍</code>.</p>

<p>The rest of this chapter is organized as follows.</p>

<ul>
  <li>
    <p>We loosen the requirement that <code class="highlighter-rouge">M</code> result in a function value and
instead require that <code class="highlighter-rouge">M</code> result in a value that is greater than or
equal to a function value. We establish several properties about
being ``greater than a function’’.</p>
  </li>
  <li>
    <p>We define the call-by-name big-step semantics of the lambda calculus
and prove that it is deterministic.</p>
  </li>
  <li>
    <p>We define the logical relation <code class="highlighter-rouge">𝕍</code> that relates values and closures,
and extend it to a relation on terms <code class="highlighter-rouge">𝔼</code> and environments <code class="highlighter-rouge">𝔾</code>.</p>
  </li>
  <li>
    <p>We prove the main lemma,
that if <code class="highlighter-rouge">𝔾 γ γ'</code> and <code class="highlighter-rouge">γ ⊢ M ↓ v</code>, then <code class="highlighter-rouge">𝔼 v (clos M γ')</code>.</p>
  </li>
  <li>
    <p>We prove adequacy as a corollary to the main lemma.</p>
  </li>
</ul>

<h2 id="the-property-of-being-greater-or-equal-to-a-function">The property of being greater or equal to a function</h2>

<p>We define the following short-hand for saying that a value is
greather-than or equal to a function value.</p>

<pre class="Agda"><a id="AboveFun"></a><a id="3646" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="3655" class="Symbol">:</a> <a id="3657" href="/Denotational/#4097" class="Datatype">Value</a> <a id="3663" class="Symbol">→</a> <a id="3665" class="PrimitiveType">Set</a>
<a id="3669" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="3678" href="/Adequacy/#3678" class="Bound">u</a> <a id="3680" class="Symbol">=</a> <a id="3682" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="3685" href="/Adequacy/#3685" class="Bound">v</a> <a id="3687" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="3689" href="/Denotational/#4097" class="Datatype">Value</a> <a id="3695" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="3697" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="3700" href="/Adequacy/#3700" class="Bound">w</a> <a id="3702" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="3704" href="/Denotational/#4097" class="Datatype">Value</a> <a id="3710" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="3712" href="/Adequacy/#3685" class="Bound">v</a> <a id="3714" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="3716" href="/Adequacy/#3700" class="Bound">w</a> <a id="3718" href="/Denotational/#4468" class="Datatype Operator">⊑</a> <a id="3720" href="/Adequacy/#3678" class="Bound">u</a></pre>

<p>If a value <code class="highlighter-rouge">u</code> is greater than a function, then an even greater value <code class="highlighter-rouge">u'</code>
is too.</p>

<pre class="Agda"><a id="AboveFun-⊑"></a><a id="3831" href="/Adequacy/#3831" class="Function">AboveFun-⊑</a> <a id="3842" class="Symbol">:</a> <a id="3844" class="Symbol">∀{</a><a id="3846" href="/Adequacy/#3846" class="Bound">u</a> <a id="3848" href="/Adequacy/#3848" class="Bound">u&#39;</a> <a id="3851" class="Symbol">:</a> <a id="3853" href="/Denotational/#4097" class="Datatype">Value</a><a id="3858" class="Symbol">}</a>
      <a id="3866" class="Symbol">→</a> <a id="3868" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="3877" href="/Adequacy/#3846" class="Bound">u</a> <a id="3879" class="Symbol">→</a> <a id="3881" href="/Adequacy/#3846" class="Bound">u</a> <a id="3883" href="/Denotational/#4468" class="Datatype Operator">⊑</a> <a id="3885" href="/Adequacy/#3848" class="Bound">u&#39;</a>
        <a id="3896" class="Comment">-------------------</a>
      <a id="3922" class="Symbol">→</a> <a id="3924" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="3933" href="/Adequacy/#3848" class="Bound">u&#39;</a>
<a id="3936" href="/Adequacy/#3831" class="Function">AboveFun-⊑</a> <a id="3947" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="3949" href="/Adequacy/#3949" class="Bound">v</a> <a id="3951" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="3953" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="3955" href="/Adequacy/#3955" class="Bound">w</a> <a id="3957" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="3959" href="/Adequacy/#3959" class="Bound">lt&#39;</a> <a id="3963" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="3965" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="3967" href="/Adequacy/#3967" class="Bound">lt</a> <a id="3970" class="Symbol">=</a> <a id="3972" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="3974" href="/Adequacy/#3949" class="Bound">v</a> <a id="3976" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="3978" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="3980" href="/Adequacy/#3955" class="Bound">w</a> <a id="3982" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="3984" href="/Denotational/#4765" class="InductiveConstructor">Trans⊑</a> <a id="3991" href="/Adequacy/#3959" class="Bound">lt&#39;</a> <a id="3995" href="/Adequacy/#3967" class="Bound">lt</a> <a id="3998" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4000" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

<p>The bottom value <code class="highlighter-rouge">⊥</code> is not greater than a function.</p>

<pre class="Agda"><a id="AboveFun⊥"></a><a id="4081" href="/Adequacy/#4081" class="Function">AboveFun⊥</a> <a id="4091" class="Symbol">:</a> <a id="4093" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="4095" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="4104" href="/Denotational/#4117" class="InductiveConstructor">⊥</a>
<a id="4106" href="/Adequacy/#4081" class="Function">AboveFun⊥</a> <a id="4116" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4118" href="/Adequacy/#4118" class="Bound">v</a> <a id="4120" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4122" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4124" href="/Adequacy/#4124" class="Bound">w</a> <a id="4126" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4128" href="/Adequacy/#4128" class="Bound">lt</a> <a id="4131" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4133" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="4139" class="Keyword">with</a> <a id="4144" href="/Denotational/#41943" class="Function">sub-inv-fun</a> <a id="4156" href="/Adequacy/#4128" class="Bound">lt</a>
<a id="4159" class="Symbol">...</a> <a id="4163" class="Symbol">|</a> <a id="4165" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4167" href="/Adequacy/#4167" class="Bound">Γ</a> <a id="4169" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4171" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4173" href="/Adequacy/#4173" class="Bound">f</a> <a id="4175" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4177" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4179" href="/Adequacy/#4179" class="Bound">Γ⊆⊥</a> <a id="4183" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4185" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4187" href="/Adequacy/#4187" class="Bound">lt1</a> <a id="4191" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4193" href="/Adequacy/#4193" class="Bound">lt2</a> <a id="4197" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4199" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4201" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4203" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="4209" class="Keyword">with</a> <a id="4214" href="/Denotational/#31410" class="Function">Funs∈</a> <a id="4220" href="/Adequacy/#4173" class="Bound">f</a>
<a id="4222" class="Symbol">...</a> <a id="4226" class="Symbol">|</a> <a id="4228" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4230" href="/Adequacy/#4230" class="Bound">A</a> <a id="4232" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4234" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4236" href="/Adequacy/#4236" class="Bound">B</a> <a id="4238" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4240" href="/Adequacy/#4240" class="Bound">m</a> <a id="4242" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4244" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="4250" class="Keyword">with</a> <a id="4255" class="Bound">Γ⊆⊥</a> <a id="4259" href="/Adequacy/#4240" class="Bound">m</a>
<a id="4261" class="Symbol">...</a> <a id="4265" class="Symbol">|</a> <a id="4267" class="Symbol">()</a></pre>

<p>If the join of two values <code class="highlighter-rouge">u</code> and <code class="highlighter-rouge">u'</code> is greater than a function, then
at least one of them is too.</p>

<pre class="Agda"><a id="AboveFun-⊔"></a><a id="4397" href="/Adequacy/#4397" class="Function">AboveFun-⊔</a> <a id="4408" class="Symbol">:</a> <a id="4410" class="Symbol">∀{</a><a id="4412" href="/Adequacy/#4412" class="Bound">u</a> <a id="4414" href="/Adequacy/#4414" class="Bound">u&#39;</a><a id="4416" class="Symbol">}</a>
           <a id="4429" class="Symbol">→</a> <a id="4431" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="4440" class="Symbol">(</a><a id="4441" href="/Adequacy/#4412" class="Bound">u</a> <a id="4443" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="4445" href="/Adequacy/#4414" class="Bound">u&#39;</a><a id="4447" class="Symbol">)</a>
           <a id="4460" class="Symbol">→</a> <a id="4462" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="4471" href="/Adequacy/#4412" class="Bound">u</a> <a id="4473" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#419" class="Datatype Operator">⊎</a> <a id="4475" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="4484" href="/Adequacy/#4414" class="Bound">u&#39;</a>
<a id="4487" href="/Adequacy/#4397" class="Function">AboveFun-⊔</a><a id="4497" class="Symbol">{</a><a id="4498" href="/Adequacy/#4498" class="Bound">u</a><a id="4499" class="Symbol">}{</a><a id="4501" href="/Adequacy/#4501" class="Bound">u&#39;</a><a id="4503" class="Symbol">}</a> <a id="4505" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4507" href="/Adequacy/#4507" class="Bound">v</a> <a id="4509" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4511" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4513" href="/Adequacy/#4513" class="Bound">w</a> <a id="4515" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4517" href="/Adequacy/#4517" class="Bound">v↦w⊑u⊔u&#39;</a> <a id="4526" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4528" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> 
    <a id="4535" class="Keyword">with</a> <a id="4540" href="/Denotational/#41943" class="Function">sub-inv-fun</a> <a id="4552" href="/Adequacy/#4517" class="Bound">v↦w⊑u⊔u&#39;</a>
<a id="4561" class="Symbol">...</a> <a id="4565" class="Symbol">|</a> <a id="4567" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4569" href="/Adequacy/#4569" class="Bound">Γ</a> <a id="4571" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4573" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4575" href="/Adequacy/#4575" class="Bound">f</a> <a id="4577" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4579" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4581" href="/Adequacy/#4581" class="Bound">Γ⊆u⊔u&#39;</a> <a id="4588" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4590" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4592" href="/Adequacy/#4592" class="Bound">lt1</a> <a id="4596" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4598" href="/Adequacy/#4598" class="Bound">lt2</a> <a id="4602" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4604" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4606" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4608" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="4614" class="Keyword">with</a> <a id="4619" href="/Denotational/#31410" class="Function">Funs∈</a> <a id="4625" href="/Adequacy/#4575" class="Bound">f</a>
<a id="4627" class="Symbol">...</a> <a id="4631" class="Symbol">|</a> <a id="4633" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4635" href="/Adequacy/#4635" class="Bound">A</a> <a id="4637" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4639" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4641" href="/Adequacy/#4641" class="Bound">B</a> <a id="4643" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4645" href="/Adequacy/#4645" class="Bound">m</a> <a id="4647" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4649" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="4655" class="Keyword">with</a> <a id="4660" class="Bound">Γ⊆u⊔u&#39;</a> <a id="4667" href="/Adequacy/#4645" class="Bound">m</a>
<a id="4669" class="Symbol">...</a> <a id="4673" class="Symbol">|</a> <a id="4675" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="4680" href="/Adequacy/#4680" class="Bound">x</a> <a id="4682" class="Symbol">=</a> <a id="4684" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="4689" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4691" class="Bound">A</a> <a id="4693" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4695" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4697" class="Bound">B</a> <a id="4699" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4701" class="Symbol">(</a><a id="4702" href="/Denotational/#29643" class="Function">∈→⊑</a> <a id="4706" href="/Adequacy/#4680" class="Bound">x</a><a id="4707" class="Symbol">)</a> <a id="4709" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4711" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="4713" class="Symbol">...</a> <a id="4717" class="Symbol">|</a> <a id="4719" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="4724" href="/Adequacy/#4724" class="Bound">x</a> <a id="4726" class="Symbol">=</a> <a id="4728" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="4733" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4735" class="Bound">A</a> <a id="4737" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4739" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="4741" class="Bound">B</a> <a id="4743" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="4745" class="Symbol">(</a><a id="4746" href="/Denotational/#29643" class="Function">∈→⊑</a> <a id="4750" href="/Adequacy/#4724" class="Bound">x</a><a id="4751" class="Symbol">)</a> <a id="4753" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="4755" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

<p>On the other hand, if neither of <code class="highlighter-rouge">u</code> and <code class="highlighter-rouge">u'</code> is greater than a function,
then their join is also not greater than a function.</p>

<pre class="Agda"><a id="not-AboveFun-⊔"></a><a id="4910" href="/Adequacy/#4910" class="Function">not-AboveFun-⊔</a> <a id="4925" class="Symbol">:</a> <a id="4927" class="Symbol">∀{</a><a id="4929" href="/Adequacy/#4929" class="Bound">u</a> <a id="4931" href="/Adequacy/#4931" class="Bound">u&#39;</a> <a id="4934" class="Symbol">:</a> <a id="4936" href="/Denotational/#4097" class="Datatype">Value</a><a id="4941" class="Symbol">}</a>
               <a id="4958" class="Symbol">→</a> <a id="4960" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="4962" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="4971" href="/Adequacy/#4929" class="Bound">u</a> <a id="4973" class="Symbol">→</a> <a id="4975" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="4977" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="4986" href="/Adequacy/#4931" class="Bound">u&#39;</a>
               <a id="5004" class="Symbol">→</a> <a id="5006" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="5008" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="5017" class="Symbol">(</a><a id="5018" href="/Adequacy/#4929" class="Bound">u</a> <a id="5020" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="5022" href="/Adequacy/#4931" class="Bound">u&#39;</a><a id="5024" class="Symbol">)</a>
<a id="5026" href="/Adequacy/#4910" class="Function">not-AboveFun-⊔</a> <a id="5041" href="/Adequacy/#5041" class="Bound">naf1</a> <a id="5046" href="/Adequacy/#5046" class="Bound">naf2</a> <a id="5051" href="/Adequacy/#5051" class="Bound">af12</a>
    <a id="5060" class="Keyword">with</a> <a id="5065" href="/Adequacy/#4397" class="Function">AboveFun-⊔</a> <a id="5076" href="/Adequacy/#5051" class="Bound">af12</a>
<a id="5081" class="Symbol">...</a> <a id="5085" class="Symbol">|</a> <a id="5087" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="5092" href="/Adequacy/#5092" class="Bound">af1</a> <a id="5096" class="Symbol">=</a> <a id="5098" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a> <a id="5112" href="/Adequacy/#5092" class="Bound">af1</a> <a id="5116" class="Bound">naf1</a>
<a id="5121" class="Symbol">...</a> <a id="5125" class="Symbol">|</a> <a id="5127" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="5132" href="/Adequacy/#5132" class="Bound">af2</a> <a id="5136" class="Symbol">=</a> <a id="5138" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a> <a id="5152" href="/Adequacy/#5132" class="Bound">af2</a> <a id="5156" class="Bound">naf2</a></pre>

<p>The converse is also true. If the join of two values is not above a
function, then neither of them is individually.</p>

<pre class="Agda"><a id="not-AboveFun-⊔-inv"></a><a id="5303" href="/Adequacy/#5303" class="Function">not-AboveFun-⊔-inv</a> <a id="5322" class="Symbol">:</a> <a id="5324" class="Symbol">∀{</a><a id="5326" href="/Adequacy/#5326" class="Bound">u</a> <a id="5328" href="/Adequacy/#5328" class="Bound">u&#39;</a> <a id="5331" class="Symbol">:</a> <a id="5333" href="/Denotational/#4097" class="Datatype">Value</a><a id="5338" class="Symbol">}</a> <a id="5340" class="Symbol">→</a> <a id="5342" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="5344" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="5353" class="Symbol">(</a><a id="5354" href="/Adequacy/#5326" class="Bound">u</a> <a id="5356" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="5358" href="/Adequacy/#5328" class="Bound">u&#39;</a><a id="5360" class="Symbol">)</a>
              <a id="5376" class="Symbol">→</a> <a id="5378" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="5380" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="5389" href="/Adequacy/#5326" class="Bound">u</a> <a id="5391" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">×</a> <a id="5393" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="5395" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="5404" href="/Adequacy/#5328" class="Bound">u&#39;</a>
<a id="5407" href="/Adequacy/#5303" class="Function">not-AboveFun-⊔-inv</a> <a id="5426" href="/Adequacy/#5426" class="Bound">af</a> <a id="5429" class="Symbol">=</a> <a id="5431" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5433" href="/Adequacy/#5459" class="Function">f</a> <a id="5435" href="/Adequacy/#5426" class="Bound">af</a> <a id="5438" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5440" href="/Adequacy/#5613" class="Function">g</a> <a id="5442" href="/Adequacy/#5426" class="Bound">af</a> <a id="5445" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
  <a id="5449" class="Keyword">where</a>
    <a id="5459" href="/Adequacy/#5459" class="Function">f</a> <a id="5461" class="Symbol">:</a> <a id="5463" class="Symbol">∀{</a><a id="5465" href="/Adequacy/#5465" class="Bound">u</a> <a id="5467" href="/Adequacy/#5467" class="Bound">u&#39;</a> <a id="5470" class="Symbol">:</a> <a id="5472" href="/Denotational/#4097" class="Datatype">Value</a><a id="5477" class="Symbol">}</a> <a id="5479" class="Symbol">→</a> <a id="5481" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="5483" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="5492" class="Symbol">(</a><a id="5493" href="/Adequacy/#5465" class="Bound">u</a> <a id="5495" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="5497" href="/Adequacy/#5467" class="Bound">u&#39;</a><a id="5499" class="Symbol">)</a> <a id="5501" class="Symbol">→</a> <a id="5503" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="5505" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="5514" href="/Adequacy/#5465" class="Bound">u</a>
    <a id="5520" href="/Adequacy/#5459" class="Function">f</a><a id="5521" class="Symbol">{</a><a id="5522" href="/Adequacy/#5522" class="Bound">u</a><a id="5523" class="Symbol">}{</a><a id="5525" href="/Adequacy/#5525" class="Bound">u&#39;</a><a id="5527" class="Symbol">}</a> <a id="5529" href="/Adequacy/#5529" class="Bound">af12</a> <a id="5534" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5536" href="/Adequacy/#5536" class="Bound">v</a> <a id="5538" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5540" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5542" href="/Adequacy/#5542" class="Bound">w</a> <a id="5544" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5546" href="/Adequacy/#5546" class="Bound">lt</a> <a id="5549" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5551" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5553" class="Symbol">=</a>
        <a id="5563" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a> <a id="5577" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5579" href="/Adequacy/#5536" class="Bound">v</a> <a id="5581" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5583" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5585" href="/Adequacy/#5542" class="Bound">w</a> <a id="5587" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5589" href="/Denotational/#4617" class="InductiveConstructor">ConjR1⊑</a> <a id="5597" href="/Adequacy/#5546" class="Bound">lt</a> <a id="5600" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5602" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5604" href="/Adequacy/#5529" class="Bound">af12</a>
    <a id="5613" href="/Adequacy/#5613" class="Function">g</a> <a id="5615" class="Symbol">:</a> <a id="5617" class="Symbol">∀{</a><a id="5619" href="/Adequacy/#5619" class="Bound">u</a> <a id="5621" href="/Adequacy/#5621" class="Bound">u&#39;</a> <a id="5624" class="Symbol">:</a> <a id="5626" href="/Denotational/#4097" class="Datatype">Value</a><a id="5631" class="Symbol">}</a> <a id="5633" class="Symbol">→</a> <a id="5635" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="5637" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="5646" class="Symbol">(</a><a id="5647" href="/Adequacy/#5619" class="Bound">u</a> <a id="5649" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="5651" href="/Adequacy/#5621" class="Bound">u&#39;</a><a id="5653" class="Symbol">)</a> <a id="5655" class="Symbol">→</a> <a id="5657" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="5659" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="5668" href="/Adequacy/#5621" class="Bound">u&#39;</a>
    <a id="5675" href="/Adequacy/#5613" class="Function">g</a><a id="5676" class="Symbol">{</a><a id="5677" href="/Adequacy/#5677" class="Bound">u</a><a id="5678" class="Symbol">}{</a><a id="5680" href="/Adequacy/#5680" class="Bound">u&#39;</a><a id="5682" class="Symbol">}</a> <a id="5684" href="/Adequacy/#5684" class="Bound">af12</a> <a id="5689" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5691" href="/Adequacy/#5691" class="Bound">v</a> <a id="5693" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5695" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5697" href="/Adequacy/#5697" class="Bound">w</a> <a id="5699" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5701" href="/Adequacy/#5701" class="Bound">lt</a> <a id="5704" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5706" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5708" class="Symbol">=</a>
        <a id="5718" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a> <a id="5732" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5734" href="/Adequacy/#5691" class="Bound">v</a> <a id="5736" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5738" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5740" href="/Adequacy/#5697" class="Bound">w</a> <a id="5742" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5744" href="/Denotational/#4691" class="InductiveConstructor">ConjR2⊑</a> <a id="5752" href="/Adequacy/#5701" class="Bound">lt</a> <a id="5755" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5757" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="5759" href="/Adequacy/#5684" class="Bound">af12</a></pre>

<p>The property of being greater than a function value is decidable, as
exhibited by the following function.</p>

<pre class="Agda"><a id="AboveFun?"></a><a id="5896" href="/Adequacy/#5896" class="Function">AboveFun?</a> <a id="5906" class="Symbol">:</a> <a id="5908" class="Symbol">(</a><a id="5909" href="/Adequacy/#5909" class="Bound">v</a> <a id="5911" class="Symbol">:</a> <a id="5913" href="/Denotational/#4097" class="Datatype">Value</a><a id="5918" class="Symbol">)</a> <a id="5920" class="Symbol">→</a> <a id="5922" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#534" class="Datatype">Dec</a> <a id="5926" class="Symbol">(</a><a id="5927" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="5936" href="/Adequacy/#5909" class="Bound">v</a><a id="5937" class="Symbol">)</a>
<a id="5939" href="/Adequacy/#5896" class="Function">AboveFun?</a> <a id="5949" href="/Denotational/#4117" class="InductiveConstructor">⊥</a> <a id="5951" class="Symbol">=</a> <a id="5953" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="5956" href="/Adequacy/#4081" class="Function">AboveFun⊥</a>
<a id="5966" href="/Adequacy/#5896" class="Function">AboveFun?</a> <a id="5976" class="Symbol">(</a><a id="5977" href="/Adequacy/#5977" class="Bound">v</a> <a id="5979" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="5981" href="/Adequacy/#5981" class="Bound">w</a><a id="5982" class="Symbol">)</a> <a id="5984" class="Symbol">=</a> <a id="5986" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="5990" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5992" href="/Adequacy/#5977" class="Bound">v</a> <a id="5994" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="5996" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="5998" href="/Adequacy/#5981" class="Bound">w</a> <a id="6000" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6002" href="/Denotational/#5638" class="Function">Refl⊑</a> <a id="6008" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6010" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="6012" href="/Adequacy/#5896" class="Function">AboveFun?</a> <a id="6022" class="Symbol">(</a><a id="6023" href="/Adequacy/#6023" class="Bound">u</a> <a id="6025" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="6027" href="/Adequacy/#6027" class="Bound">u&#39;</a><a id="6029" class="Symbol">)</a>
    <a id="6035" class="Keyword">with</a> <a id="6040" href="/Adequacy/#5896" class="Function">AboveFun?</a> <a id="6050" href="/Adequacy/#6023" class="Bound">u</a> <a id="6052" class="Symbol">|</a> <a id="6054" href="/Adequacy/#5896" class="Function">AboveFun?</a> <a id="6064" href="/Adequacy/#6027" class="Bound">u&#39;</a>
<a id="6067" class="Symbol">...</a> <a id="6071" class="Symbol">|</a> <a id="6073" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="6077" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6079" href="/Adequacy/#6079" class="Bound">v</a> <a id="6081" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6083" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6085" href="/Adequacy/#6085" class="Bound">w</a> <a id="6087" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6089" href="/Adequacy/#6089" class="Bound">lt</a> <a id="6092" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6094" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6096" class="Symbol">|</a> <a id="6098" class="Symbol">_</a> <a id="6100" class="Symbol">=</a> <a id="6102" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="6106" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6108" href="/Adequacy/#6079" class="Bound">v</a> <a id="6110" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6112" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6114" href="/Adequacy/#6085" class="Bound">w</a> <a id="6116" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6118" class="Symbol">(</a><a id="6119" href="/Denotational/#4617" class="InductiveConstructor">ConjR1⊑</a> <a id="6127" href="/Adequacy/#6089" class="Bound">lt</a><a id="6129" class="Symbol">)</a> <a id="6131" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6133" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="6135" class="Symbol">...</a> <a id="6139" class="Symbol">|</a> <a id="6141" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="6144" class="Symbol">_</a> <a id="6146" class="Symbol">|</a> <a id="6148" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="6152" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6154" href="/Adequacy/#6154" class="Bound">v</a> <a id="6156" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6158" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6160" href="/Adequacy/#6160" class="Bound">w</a> <a id="6162" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6164" href="/Adequacy/#6164" class="Bound">lt</a> <a id="6167" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6169" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6171" class="Symbol">=</a> <a id="6173" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="6177" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6179" href="/Adequacy/#6154" class="Bound">v</a> <a id="6181" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6183" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="6185" href="/Adequacy/#6160" class="Bound">w</a> <a id="6187" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="6189" class="Symbol">(</a><a id="6190" href="/Denotational/#4691" class="InductiveConstructor">ConjR2⊑</a> <a id="6198" href="/Adequacy/#6164" class="Bound">lt</a><a id="6200" class="Symbol">)</a> <a id="6202" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="6204" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="6206" class="Symbol">...</a> <a id="6210" class="Symbol">|</a> <a id="6212" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="6215" href="/Adequacy/#6215" class="Bound">x</a> <a id="6217" class="Symbol">|</a> <a id="6219" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="6222" href="/Adequacy/#6222" class="Bound">y</a> <a id="6224" class="Symbol">=</a> <a id="6226" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="6229" class="Symbol">(</a><a id="6230" href="/Adequacy/#4910" class="Function">not-AboveFun-⊔</a> <a id="6245" href="/Adequacy/#6215" class="Bound">x</a> <a id="6247" href="/Adequacy/#6222" class="Bound">y</a><a id="6248" class="Symbol">)</a></pre>

<h2 id="big-step-semantics-for-call-by-name-lambda-calculus">Big-step semantics for call-by-name lambda calculus</h2>

<p>To better align with the denotational semantics, we shall use an
environment-passing big-step semantics. Because this is call-by-name,
an environment maps each variable to a closure, that is, to a term
paired with its environment. (Environments and closures are mutually
recursive.) We define environments and closures as follows.</p>

<pre class="Agda"><a id="ClosEnv"></a><a id="6664" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="6672" class="Symbol">:</a> <a id="6674" href="/Untyped/#2980" class="Datatype">Context</a> <a id="6682" class="Symbol">→</a> <a id="6684" class="PrimitiveType">Set</a>

<a id="6689" class="Keyword">data</a> <a id="Clos"></a><a id="6694" href="/Adequacy/#6694" class="Datatype">Clos</a> <a id="6699" class="Symbol">:</a> <a id="6701" class="PrimitiveType">Set</a> <a id="6705" class="Keyword">where</a>
  <a id="Clos.clos"></a><a id="6713" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="6718" class="Symbol">:</a> <a id="6720" class="Symbol">∀{</a><a id="6722" href="/Adequacy/#6722" class="Bound">Γ</a><a id="6723" class="Symbol">}</a> <a id="6725" class="Symbol">→</a> <a id="6727" class="Symbol">(</a><a id="6728" href="/Adequacy/#6728" class="Bound">M</a> <a id="6730" class="Symbol">:</a> <a id="6732" href="/Adequacy/#6722" class="Bound">Γ</a> <a id="6734" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="6736" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="6737" class="Symbol">)</a> <a id="6739" class="Symbol">→</a> <a id="6741" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="6749" href="/Adequacy/#6722" class="Bound">Γ</a> <a id="6751" class="Symbol">→</a> <a id="6753" href="/Adequacy/#6694" class="Datatype">Clos</a>

<a id="6759" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="6767" href="/Adequacy/#6767" class="Bound">Γ</a> <a id="6769" class="Symbol">=</a> <a id="6771" class="Symbol">∀</a> <a id="6773" class="Symbol">(</a><a id="6774" href="/Adequacy/#6774" class="Bound">x</a> <a id="6776" class="Symbol">:</a> <a id="6778" href="/Adequacy/#6767" class="Bound">Γ</a> <a id="6780" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="6782" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="6783" class="Symbol">)</a> <a id="6785" class="Symbol">→</a> <a id="6787" href="/Adequacy/#6694" class="Datatype">Clos</a></pre>

<p>As usual, we have the empty environment, and we can extend an
environment.</p>
<pre class="Agda"><a id="∅&#39;"></a><a id="6892" href="/Adequacy/#6892" class="Function">∅&#39;</a> <a id="6895" class="Symbol">:</a> <a id="6897" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="6905" href="/Untyped/#3002" class="InductiveConstructor">∅</a>
<a id="6907" href="/Adequacy/#6892" class="Function">∅&#39;</a> <a id="6910" class="Symbol">()</a>

<a id="_,&#39;_"></a><a id="6914" href="/Adequacy/#6914" class="Function Operator">_,&#39;_</a> <a id="6919" class="Symbol">:</a> <a id="6921" class="Symbol">∀</a> <a id="6923" class="Symbol">{</a><a id="6924" href="/Adequacy/#6924" class="Bound">Γ</a><a id="6925" class="Symbol">}</a> <a id="6927" class="Symbol">→</a> <a id="6929" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="6937" href="/Adequacy/#6924" class="Bound">Γ</a> <a id="6939" class="Symbol">→</a> <a id="6941" href="/Adequacy/#6694" class="Datatype">Clos</a> <a id="6946" class="Symbol">→</a> <a id="6948" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="6956" class="Symbol">(</a><a id="6957" href="/Adequacy/#6924" class="Bound">Γ</a> <a id="6959" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="6961" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="6962" class="Symbol">)</a>
<a id="6964" class="Symbol">(</a><a id="6965" href="/Adequacy/#6965" class="Bound">γ</a> <a id="6967" href="/Adequacy/#6914" class="Function Operator">,&#39;</a> <a id="6970" href="/Adequacy/#6970" class="Bound">c</a><a id="6971" class="Symbol">)</a> <a id="6973" href="/Untyped/#3401" class="InductiveConstructor">Z</a> <a id="6975" class="Symbol">=</a> <a id="6977" href="/Adequacy/#6970" class="Bound">c</a>
<a id="6979" class="Symbol">(</a><a id="6980" href="/Adequacy/#6980" class="Bound">γ</a> <a id="6982" href="/Adequacy/#6914" class="Function Operator">,&#39;</a> <a id="6985" href="/Adequacy/#6985" class="Bound">c</a><a id="6986" class="Symbol">)</a> <a id="6988" class="Symbol">(</a><a id="6989" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="6991" href="/Adequacy/#6991" class="Bound">x</a><a id="6992" class="Symbol">)</a> <a id="6994" class="Symbol">=</a> <a id="6996" href="/Adequacy/#6980" class="Bound">γ</a> <a id="6998" href="/Adequacy/#6991" class="Bound">x</a></pre>

<p>The following is the big-step semantics for call-by-name evaluation,
which we describe below.</p>

<pre class="Agda"><a id="7120" class="Keyword">data</a> <a id="_⊢_⇓_"></a><a id="7125" href="/Adequacy/#7125" class="Datatype Operator">_⊢_⇓_</a> <a id="7131" class="Symbol">:</a> <a id="7133" class="Symbol">∀{</a><a id="7135" href="/Adequacy/#7135" class="Bound">Γ</a><a id="7136" class="Symbol">}</a> <a id="7138" class="Symbol">→</a> <a id="7140" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="7148" href="/Adequacy/#7135" class="Bound">Γ</a> <a id="7150" class="Symbol">→</a> <a id="7152" class="Symbol">(</a><a id="7153" href="/Adequacy/#7135" class="Bound">Γ</a> <a id="7155" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="7157" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="7158" class="Symbol">)</a> <a id="7160" class="Symbol">→</a> <a id="7162" href="/Adequacy/#6694" class="Datatype">Clos</a> <a id="7167" class="Symbol">→</a> <a id="7169" class="PrimitiveType">Set</a> <a id="7173" class="Keyword">where</a>

  <a id="_⊢_⇓_.⇓-var"></a><a id="7182" href="/Adequacy/#7182" class="InductiveConstructor">⇓-var</a> <a id="7188" class="Symbol">:</a> <a id="7190" class="Symbol">∀{</a><a id="7192" href="/Adequacy/#7192" class="Bound">Γ</a><a id="7193" class="Symbol">}{</a><a id="7195" href="/Adequacy/#7195" class="Bound">γ</a> <a id="7197" class="Symbol">:</a> <a id="7199" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="7207" href="/Adequacy/#7192" class="Bound">Γ</a><a id="7208" class="Symbol">}{</a><a id="7210" href="/Adequacy/#7210" class="Bound">x</a> <a id="7212" class="Symbol">:</a> <a id="7214" href="/Adequacy/#7192" class="Bound">Γ</a> <a id="7216" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="7218" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="7219" class="Symbol">}{</a><a id="7221" href="/Adequacy/#7221" class="Bound">Δ</a><a id="7222" class="Symbol">}{</a><a id="7224" href="/Adequacy/#7224" class="Bound">δ</a> <a id="7226" class="Symbol">:</a> <a id="7228" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="7236" href="/Adequacy/#7221" class="Bound">Δ</a><a id="7237" class="Symbol">}{</a><a id="7239" href="/Adequacy/#7239" class="Bound">M</a> <a id="7241" class="Symbol">:</a> <a id="7243" href="/Adequacy/#7221" class="Bound">Δ</a> <a id="7245" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="7247" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="7248" class="Symbol">}{</a><a id="7250" href="/Adequacy/#7250" class="Bound">c</a><a id="7251" class="Symbol">}</a>
        <a id="7261" class="Symbol">→</a> <a id="7263" href="/Adequacy/#7195" class="Bound">γ</a> <a id="7265" href="/Adequacy/#7210" class="Bound">x</a> <a id="7267" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="7269" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="7274" href="/Adequacy/#7239" class="Bound">M</a> <a id="7276" href="/Adequacy/#7224" class="Bound">δ</a>
        <a id="7286" class="Symbol">→</a> <a id="7288" href="/Adequacy/#7224" class="Bound">δ</a> <a id="7290" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="7292" href="/Adequacy/#7239" class="Bound">M</a> <a id="7294" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="7296" href="/Adequacy/#7250" class="Bound">c</a>
          <a id="7308" class="Comment">-----------</a>
        <a id="7328" class="Symbol">→</a> <a id="7330" href="/Adequacy/#7195" class="Bound">γ</a> <a id="7332" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="7334" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="7336" href="/Adequacy/#7210" class="Bound">x</a> <a id="7338" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="7340" href="/Adequacy/#7250" class="Bound">c</a>

  <a id="_⊢_⇓_.⇓-lam"></a><a id="7345" href="/Adequacy/#7345" class="InductiveConstructor">⇓-lam</a> <a id="7351" class="Symbol">:</a> <a id="7353" class="Symbol">∀{</a><a id="7355" href="/Adequacy/#7355" class="Bound">Γ</a><a id="7356" class="Symbol">}{</a><a id="7358" href="/Adequacy/#7358" class="Bound">γ</a> <a id="7360" class="Symbol">:</a> <a id="7362" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="7370" href="/Adequacy/#7355" class="Bound">Γ</a><a id="7371" class="Symbol">}{</a><a id="7373" href="/Adequacy/#7373" class="Bound">M</a> <a id="7375" class="Symbol">:</a> <a id="7377" href="/Adequacy/#7355" class="Bound">Γ</a> <a id="7379" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="7381" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="7383" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="7385" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="7386" class="Symbol">}</a>
        <a id="7396" class="Symbol">→</a> <a id="7398" href="/Adequacy/#7358" class="Bound">γ</a> <a id="7400" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="7402" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="7404" href="/Adequacy/#7373" class="Bound">M</a> <a id="7406" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="7408" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="7413" class="Symbol">(</a><a id="7414" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="7416" href="/Adequacy/#7373" class="Bound">M</a><a id="7417" class="Symbol">)</a> <a id="7419" href="/Adequacy/#7358" class="Bound">γ</a>

  <a id="_⊢_⇓_.⇓-app"></a><a id="7424" href="/Adequacy/#7424" class="InductiveConstructor">⇓-app</a> <a id="7430" class="Symbol">:</a> <a id="7432" class="Symbol">∀{</a><a id="7434" href="/Adequacy/#7434" class="Bound">Γ</a><a id="7435" class="Symbol">}{</a><a id="7437" href="/Adequacy/#7437" class="Bound">γ</a> <a id="7439" class="Symbol">:</a> <a id="7441" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="7449" href="/Adequacy/#7434" class="Bound">Γ</a><a id="7450" class="Symbol">}{</a><a id="7452" href="/Adequacy/#7452" class="Bound">L</a> <a id="7454" href="/Adequacy/#7454" class="Bound">M</a> <a id="7456" class="Symbol">:</a> <a id="7458" href="/Adequacy/#7434" class="Bound">Γ</a> <a id="7460" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="7462" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="7463" class="Symbol">}{</a><a id="7465" href="/Adequacy/#7465" class="Bound">Δ</a><a id="7466" class="Symbol">}{</a><a id="7468" href="/Adequacy/#7468" class="Bound">δ</a> <a id="7470" class="Symbol">:</a> <a id="7472" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="7480" href="/Adequacy/#7465" class="Bound">Δ</a><a id="7481" class="Symbol">}{</a><a id="7483" href="/Adequacy/#7483" class="Bound">N</a> <a id="7485" class="Symbol">:</a> <a id="7487" href="/Adequacy/#7465" class="Bound">Δ</a> <a id="7489" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="7491" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="7493" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="7495" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="7496" class="Symbol">}{</a><a id="7498" href="/Adequacy/#7498" class="Bound">c</a><a id="7499" class="Symbol">}</a>
       <a id="7508" class="Symbol">→</a> <a id="7510" href="/Adequacy/#7437" class="Bound">γ</a> <a id="7512" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="7514" href="/Adequacy/#7452" class="Bound">L</a> <a id="7516" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="7518" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="7523" class="Symbol">(</a><a id="7524" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="7526" href="/Adequacy/#7483" class="Bound">N</a><a id="7527" class="Symbol">)</a> <a id="7529" href="/Adequacy/#7468" class="Bound">δ</a>   <a id="7533" class="Symbol">→</a>   <a id="7537" class="Symbol">(</a><a id="7538" href="/Adequacy/#7468" class="Bound">δ</a> <a id="7540" href="/Adequacy/#6914" class="Function Operator">,&#39;</a> <a id="7543" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="7548" href="/Adequacy/#7454" class="Bound">M</a> <a id="7550" href="/Adequacy/#7437" class="Bound">γ</a><a id="7551" class="Symbol">)</a> <a id="7553" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="7555" href="/Adequacy/#7483" class="Bound">N</a> <a id="7557" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="7559" href="/Adequacy/#7498" class="Bound">c</a>
         <a id="7570" class="Comment">----------------------------------------------------</a>
       <a id="7630" class="Symbol">→</a> <a id="7632" href="/Adequacy/#7437" class="Bound">γ</a> <a id="7634" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="7636" href="/Adequacy/#7452" class="Bound">L</a> <a id="7638" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="7640" href="/Adequacy/#7454" class="Bound">M</a> <a id="7642" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="7644" href="/Adequacy/#7498" class="Bound">c</a></pre>

<ul>
  <li>
    <p>The <code class="highlighter-rouge">⇓-var</code> rule evaluates a variable by finding the associated
closure in the environment and then evaluating the closure.</p>
  </li>
  <li>
    <p>The <code class="highlighter-rouge">⇓-lam</code> rule turns a lambda abstraction into a closure
by packaging it up with its environment.</p>
  </li>
  <li>
    <p>The <code class="highlighter-rouge">⇓-app</code> rule performs function application by first evaluating
the term <code class="highlighter-rouge">L</code> in operator position. If that produces a closure containing
a lambda abstraction <code class="highlighter-rouge">ƛ N</code>, then we evaluate the body <code class="highlighter-rouge">N</code> in an
environment extended with the argument <code class="highlighter-rouge">M</code>. Note that <code class="highlighter-rouge">M</code> is not
evaluated in rule <code class="highlighter-rouge">⇓-app</code> because this is call-by-name and not
call-by-value.</p>
  </li>
</ul>

<p>If the big-step semantics says that a term <code class="highlighter-rouge">M</code> evaluates to both <code class="highlighter-rouge">c</code> and
<code class="highlighter-rouge">c'</code>, then <code class="highlighter-rouge">c</code> and <code class="highlighter-rouge">c'</code> are identical. In other words, the big-step relation
is a partial function.</p>

<pre class="Agda"><a id="⇓-determ"></a><a id="8439" href="/Adequacy/#8439" class="Function">⇓-determ</a> <a id="8448" class="Symbol">:</a> <a id="8450" class="Symbol">∀{</a><a id="8452" href="/Adequacy/#8452" class="Bound">Γ</a><a id="8453" class="Symbol">}{</a><a id="8455" href="/Adequacy/#8455" class="Bound">γ</a> <a id="8457" class="Symbol">:</a> <a id="8459" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="8467" href="/Adequacy/#8452" class="Bound">Γ</a><a id="8468" class="Symbol">}{</a><a id="8470" href="/Adequacy/#8470" class="Bound">M</a> <a id="8472" class="Symbol">:</a> <a id="8474" href="/Adequacy/#8452" class="Bound">Γ</a> <a id="8476" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="8478" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="8479" class="Symbol">}{</a><a id="8481" href="/Adequacy/#8481" class="Bound">c</a> <a id="8483" href="/Adequacy/#8483" class="Bound">c&#39;</a> <a id="8486" class="Symbol">:</a> <a id="8488" href="/Adequacy/#6694" class="Datatype">Clos</a><a id="8492" class="Symbol">}</a>
         <a id="8503" class="Symbol">→</a> <a id="8505" href="/Adequacy/#8455" class="Bound">γ</a> <a id="8507" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="8509" href="/Adequacy/#8470" class="Bound">M</a> <a id="8511" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="8513" href="/Adequacy/#8481" class="Bound">c</a> <a id="8515" class="Symbol">→</a> <a id="8517" href="/Adequacy/#8455" class="Bound">γ</a> <a id="8519" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="8521" href="/Adequacy/#8470" class="Bound">M</a> <a id="8523" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="8525" href="/Adequacy/#8483" class="Bound">c&#39;</a>
         <a id="8537" class="Symbol">→</a> <a id="8539" href="/Adequacy/#8481" class="Bound">c</a> <a id="8541" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8543" href="/Adequacy/#8483" class="Bound">c&#39;</a>
<a id="8546" href="/Adequacy/#8439" class="Function">⇓-determ</a> <a id="8555" class="Symbol">(</a><a id="8556" href="/Adequacy/#7182" class="InductiveConstructor">⇓-var</a> <a id="8562" href="/Adequacy/#8562" class="Bound">eq1</a> <a id="8566" href="/Adequacy/#8566" class="Bound">mc</a><a id="8568" class="Symbol">)</a> <a id="8570" class="Symbol">(</a><a id="8571" href="/Adequacy/#7182" class="InductiveConstructor">⇓-var</a> <a id="8577" href="/Adequacy/#8577" class="Bound">eq2</a> <a id="8581" href="/Adequacy/#8581" class="Bound">mc&#39;</a><a id="8584" class="Symbol">)</a>
      <a id="8592" class="Keyword">with</a> <a id="8597" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#887" class="Function">trans</a> <a id="8603" class="Symbol">(</a><a id="8604" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a> <a id="8608" href="/Adequacy/#8562" class="Bound">eq1</a><a id="8611" class="Symbol">)</a> <a id="8613" href="/Adequacy/#8577" class="Bound">eq2</a>
<a id="8617" class="Symbol">...</a> <a id="8621" class="Symbol">|</a> <a id="8623" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="8628" class="Symbol">=</a> <a id="8630" href="/Adequacy/#8439" class="Function">⇓-determ</a> <a id="8639" class="Bound">mc</a> <a id="8642" class="Bound">mc&#39;</a>
<a id="8646" href="/Adequacy/#8439" class="Function">⇓-determ</a> <a id="8655" href="/Adequacy/#7345" class="InductiveConstructor">⇓-lam</a> <a id="8661" href="/Adequacy/#7345" class="InductiveConstructor">⇓-lam</a> <a id="8667" class="Symbol">=</a> <a id="8669" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="8674" href="/Adequacy/#8439" class="Function">⇓-determ</a> <a id="8683" class="Symbol">(</a><a id="8684" href="/Adequacy/#7424" class="InductiveConstructor">⇓-app</a> <a id="8690" href="/Adequacy/#8690" class="Bound">mc</a> <a id="8693" href="/Adequacy/#8693" class="Bound">mc₁</a><a id="8696" class="Symbol">)</a> <a id="8698" class="Symbol">(</a><a id="8699" href="/Adequacy/#7424" class="InductiveConstructor">⇓-app</a> <a id="8705" href="/Adequacy/#8705" class="Bound">mc&#39;</a> <a id="8709" href="/Adequacy/#8709" class="Bound">mc&#39;&#39;</a><a id="8713" class="Symbol">)</a> 
    <a id="8720" class="Keyword">with</a> <a id="8725" href="/Adequacy/#8439" class="Function">⇓-determ</a> <a id="8734" href="/Adequacy/#8690" class="Bound">mc</a> <a id="8737" href="/Adequacy/#8705" class="Bound">mc&#39;</a>
<a id="8741" class="Symbol">...</a> <a id="8745" class="Symbol">|</a> <a id="8747" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="8752" class="Symbol">=</a> <a id="8754" href="/Adequacy/#8439" class="Function">⇓-determ</a> <a id="8763" class="Bound">mc₁</a> <a id="8767" class="Bound">mc&#39;&#39;</a></pre>

<h2 id="relating-values-to-closures">Relating values to closures</h2>

<p>Next we relate semantic values to closures.  The relation <code class="highlighter-rouge">𝕍</code> is for
closures whose term is a lambda abstraction, i.e., in weak-head normal
form (WHNF). The relation 𝔼 is for any closure. Roughly speaking,
<code class="highlighter-rouge">𝔼 v c</code> will hold if, when <code class="highlighter-rouge">v</code> is greater than a function value, <code class="highlighter-rouge">c</code> evaluates
to a closure <code class="highlighter-rouge">c'</code> in WHNF and <code class="highlighter-rouge">𝕍 v c'</code>. Regarding <code class="highlighter-rouge">𝕍 v c</code>, it will hold when
<code class="highlighter-rouge">c</code> is in WHNF, and if <code class="highlighter-rouge">v</code> is a function, the body of <code class="highlighter-rouge">c</code> evaluates
according to <code class="highlighter-rouge">v</code>.</p>

<pre class="Agda"><a id="𝕍"></a><a id="9279" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="9281" class="Symbol">:</a> <a id="9283" href="/Denotational/#4097" class="Datatype">Value</a> <a id="9289" class="Symbol">→</a> <a id="9291" href="/Adequacy/#6694" class="Datatype">Clos</a> <a id="9296" class="Symbol">→</a> <a id="9298" class="PrimitiveType">Set</a>
<a id="𝔼"></a><a id="9302" href="/Adequacy/#9302" class="Function">𝔼</a> <a id="9304" class="Symbol">:</a> <a id="9306" href="/Denotational/#4097" class="Datatype">Value</a> <a id="9312" class="Symbol">→</a> <a id="9314" href="/Adequacy/#6694" class="Datatype">Clos</a> <a id="9319" class="Symbol">→</a> <a id="9321" class="PrimitiveType">Set</a></pre>

<p>We define <code class="highlighter-rouge">𝕍</code> as a function from values and closures to <code class="highlighter-rouge">Set</code> and not as a
data type because it is mutually recursive with <code class="highlighter-rouge">𝔼</code> in a negative
position (to the left of an implication).  We first perform case
analysis on the term in the closure. If the term is a variable or
application, then <code class="highlighter-rouge">𝕍</code> is false (<code class="highlighter-rouge">Bot</code>). If the term is a lambda
abstraction, we define <code class="highlighter-rouge">𝕍</code> by recursion on the value, which we
describe below.</p>

<pre class="Agda"><a id="9766" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="9768" href="/Adequacy/#9768" class="Bound">v</a> <a id="9770" class="Symbol">(</a><a id="9771" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="9776" class="Symbol">(</a><a id="9777" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="9779" href="/Adequacy/#9779" class="Bound">x₁</a><a id="9781" class="Symbol">)</a> <a id="9783" href="/Adequacy/#9783" class="Bound">γ</a><a id="9784" class="Symbol">)</a> <a id="9786" class="Symbol">=</a> <a id="9788" href="https://agda.github.io/agda-stdlib/Data.Empty.html#243" class="Datatype">Bot</a>
<a id="9792" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="9794" href="/Adequacy/#9794" class="Bound">v</a> <a id="9796" class="Symbol">(</a><a id="9797" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="9802" class="Symbol">(</a><a id="9803" href="/Adequacy/#9803" class="Bound">M</a> <a id="9805" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="9807" href="/Adequacy/#9807" class="Bound">M₁</a><a id="9809" class="Symbol">)</a> <a id="9811" href="/Adequacy/#9811" class="Bound">γ</a><a id="9812" class="Symbol">)</a> <a id="9814" class="Symbol">=</a> <a id="9816" href="https://agda.github.io/agda-stdlib/Data.Empty.html#243" class="Datatype">Bot</a>
<a id="9820" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="9822" href="/Denotational/#4117" class="InductiveConstructor">⊥</a> <a id="9824" class="Symbol">(</a><a id="9825" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="9830" class="Symbol">(</a><a id="9831" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="9833" href="/Adequacy/#9833" class="Bound">M</a><a id="9834" class="Symbol">)</a> <a id="9836" href="/Adequacy/#9836" class="Bound">γ</a><a id="9837" class="Symbol">)</a> <a id="9839" class="Symbol">=</a> <a id="9841" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Unit.html#69" class="Record">⊤</a>
<a id="9843" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="9845" class="Symbol">(</a><a id="9846" href="/Adequacy/#9846" class="Bound">v</a> <a id="9848" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="9850" href="/Adequacy/#9850" class="Bound">w</a><a id="9851" class="Symbol">)</a> <a id="9853" class="Symbol">(</a><a id="9854" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="9859" class="Symbol">(</a><a id="9860" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="9862" href="/Adequacy/#9862" class="Bound">N</a><a id="9863" class="Symbol">)</a> <a id="9865" href="/Adequacy/#9865" class="Bound">γ</a><a id="9866" class="Symbol">)</a> <a id="9868" class="Symbol">=</a>
    <a id="9874" class="Symbol">(∀{</a><a id="9877" href="/Adequacy/#9877" class="Bound">c</a> <a id="9879" class="Symbol">:</a> <a id="9881" href="/Adequacy/#6694" class="Datatype">Clos</a><a id="9885" class="Symbol">}</a> <a id="9887" class="Symbol">→</a> <a id="9889" href="/Adequacy/#9302" class="Function">𝔼</a> <a id="9891" href="/Adequacy/#9846" class="Bound">v</a> <a id="9893" href="/Adequacy/#9877" class="Bound">c</a> <a id="9895" class="Symbol">→</a> <a id="9897" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="9906" href="/Adequacy/#9850" class="Bound">w</a> <a id="9908" class="Symbol">→</a> <a id="9910" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="9913" href="/Adequacy/#9913" class="Bound">c&#39;</a> <a id="9916" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="9918" href="/Adequacy/#6694" class="Datatype">Clos</a> <a id="9923" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a>
        <a id="9933" class="Symbol">(</a><a id="9934" href="/Adequacy/#9865" class="Bound">γ</a> <a id="9936" href="/Adequacy/#6914" class="Function Operator">,&#39;</a> <a id="9939" href="/Adequacy/#9877" class="Bound">c</a><a id="9940" class="Symbol">)</a> <a id="9942" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="9944" href="/Adequacy/#9862" class="Bound">N</a> <a id="9946" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="9948" href="/Adequacy/#9913" class="Bound">c&#39;</a>  <a id="9952" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">×</a>  <a id="9955" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="9957" href="/Adequacy/#9850" class="Bound">w</a> <a id="9959" href="/Adequacy/#9913" class="Bound">c&#39;</a><a id="9961" class="Symbol">)</a>
<a id="9963" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="9965" class="Symbol">(</a><a id="9966" href="/Adequacy/#9966" class="Bound">u</a> <a id="9968" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="9970" href="/Adequacy/#9970" class="Bound">v</a><a id="9971" class="Symbol">)</a> <a id="9973" class="Symbol">(</a><a id="9974" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="9979" class="Symbol">(</a><a id="9980" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="9982" href="/Adequacy/#9982" class="Bound">N</a><a id="9983" class="Symbol">)</a> <a id="9985" href="/Adequacy/#9985" class="Bound">γ</a><a id="9986" class="Symbol">)</a> <a id="9988" class="Symbol">=</a> <a id="9990" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="9992" href="/Adequacy/#9966" class="Bound">u</a> <a id="9994" class="Symbol">(</a><a id="9995" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="10000" class="Symbol">(</a><a id="10001" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="10003" href="/Adequacy/#9982" class="Bound">N</a><a id="10004" class="Symbol">)</a> <a id="10006" href="/Adequacy/#9985" class="Bound">γ</a><a id="10007" class="Symbol">)</a> <a id="10009" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">×</a> <a id="10011" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="10013" href="/Adequacy/#9970" class="Bound">v</a> <a id="10015" class="Symbol">(</a><a id="10016" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="10021" class="Symbol">(</a><a id="10022" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="10024" href="/Adequacy/#9982" class="Bound">N</a><a id="10025" class="Symbol">)</a> <a id="10027" href="/Adequacy/#9985" class="Bound">γ</a><a id="10028" class="Symbol">)</a></pre>

<ul>
  <li>
    <p>If the value is <code class="highlighter-rouge">⊥</code>, then the result is true (<code class="highlighter-rouge">⊤</code>).</p>
  </li>
  <li>
    <p>If the value is a join (u ⊔ v), then the result is the pair
(conjunction) of 𝕍 is true for both u and v.</p>
  </li>
  <li>
    <p>The important case is for a function value <code class="highlighter-rouge">v ↦ w</code> and closure
<code class="highlighter-rouge">clos (ƛ N) γ</code>. Given any closure <code class="highlighter-rouge">c</code> such that <code class="highlighter-rouge">𝔼 v c</code>, if <code class="highlighter-rouge">w</code> is
greater than a function, then <code class="highlighter-rouge">N</code> evaluates (with <code class="highlighter-rouge">γ</code> extended with <code class="highlighter-rouge">c</code>)
to some closure <code class="highlighter-rouge">c'</code> and we have <code class="highlighter-rouge">𝕍 w c'</code>.</p>
  </li>
</ul>

<p>The definition of <code class="highlighter-rouge">𝔼</code> is straightforward. If <code class="highlighter-rouge">v</code> is a greater than a
function, then <code class="highlighter-rouge">M</code> evaluates to a closure related to <code class="highlighter-rouge">v</code>.</p>

<pre class="Agda"><a id="10604" href="/Adequacy/#9302" class="Function">𝔼</a> <a id="10606" href="/Adequacy/#10606" class="Bound">v</a> <a id="10608" class="Symbol">(</a><a id="10609" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="10614" href="/Adequacy/#10614" class="Bound">M</a> <a id="10616" href="/Adequacy/#10616" class="Bound">γ&#39;</a><a id="10618" class="Symbol">)</a> <a id="10620" class="Symbol">=</a> <a id="10622" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="10631" href="/Adequacy/#10606" class="Bound">v</a> <a id="10633" class="Symbol">→</a> <a id="10635" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="10638" href="/Adequacy/#10638" class="Bound">c</a> <a id="10640" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="10642" href="/Adequacy/#6694" class="Datatype">Clos</a> <a id="10647" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="10649" href="/Adequacy/#10616" class="Bound">γ&#39;</a> <a id="10652" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="10654" href="/Adequacy/#10614" class="Bound">M</a> <a id="10656" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="10658" href="/Adequacy/#10638" class="Bound">c</a> <a id="10660" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">×</a> <a id="10662" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="10664" href="/Adequacy/#10606" class="Bound">v</a> <a id="10666" href="/Adequacy/#10638" class="Bound">c</a></pre>

<p>The proof of the main lemma is by induction on <code class="highlighter-rouge">γ ⊢ M ↓ v</code>, so it goes
underneath lambda abstractions and must therefore reason about open
terms (terms with variables). So we must relate environments of
semantic values to environments of closures.  In the following, <code class="highlighter-rouge">𝔾</code>
relates <code class="highlighter-rouge">γ</code> to <code class="highlighter-rouge">γ'</code> if the corresponding values and closures are related
by <code class="highlighter-rouge">𝔼</code>.</p>

<pre class="Agda"><a id="𝔾"></a><a id="11046" href="/Adequacy/#11046" class="Function">𝔾</a> <a id="11048" class="Symbol">:</a> <a id="11050" class="Symbol">∀{</a><a id="11052" href="/Adequacy/#11052" class="Bound">Γ</a><a id="11053" class="Symbol">}</a> <a id="11055" class="Symbol">→</a> <a id="11057" href="/Denotational/#7331" class="Function">Env</a> <a id="11061" href="/Adequacy/#11052" class="Bound">Γ</a> <a id="11063" class="Symbol">→</a> <a id="11065" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="11073" href="/Adequacy/#11052" class="Bound">Γ</a> <a id="11075" class="Symbol">→</a> <a id="11077" class="PrimitiveType">Set</a>
<a id="11081" href="/Adequacy/#11046" class="Function">𝔾</a> <a id="11083" class="Symbol">{</a><a id="11084" href="/Adequacy/#11084" class="Bound">Γ</a><a id="11085" class="Symbol">}</a> <a id="11087" href="/Adequacy/#11087" class="Bound">γ</a> <a id="11089" href="/Adequacy/#11089" class="Bound">γ&#39;</a> <a id="11092" class="Symbol">=</a> <a id="11094" class="Symbol">∀{</a><a id="11096" href="/Adequacy/#11096" class="Bound">x</a> <a id="11098" class="Symbol">:</a> <a id="11100" href="/Adequacy/#11084" class="Bound">Γ</a> <a id="11102" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="11104" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="11105" class="Symbol">}</a> <a id="11107" class="Symbol">→</a> <a id="11109" href="/Adequacy/#9302" class="Function">𝔼</a> <a id="11111" class="Symbol">(</a><a id="11112" href="/Adequacy/#11087" class="Bound">γ</a> <a id="11114" href="/Adequacy/#11096" class="Bound">x</a><a id="11115" class="Symbol">)</a> <a id="11117" class="Symbol">(</a><a id="11118" href="/Adequacy/#11089" class="Bound">γ&#39;</a> <a id="11121" href="/Adequacy/#11096" class="Bound">x</a><a id="11122" class="Symbol">)</a>

<a id="𝔾-∅"></a><a id="11125" href="/Adequacy/#11125" class="Function">𝔾-∅</a> <a id="11129" class="Symbol">:</a> <a id="11131" href="/Adequacy/#11046" class="Function">𝔾</a> <a id="11133" href="/Denotational/#7471" class="Function">`∅</a> <a id="11136" href="/Adequacy/#6892" class="Function">∅&#39;</a>
<a id="11139" href="/Adequacy/#11125" class="Function">𝔾-∅</a> <a id="11143" class="Symbol">{()}</a>

<a id="𝔾-ext"></a><a id="11149" href="/Adequacy/#11149" class="Function">𝔾-ext</a> <a id="11155" class="Symbol">:</a> <a id="11157" class="Symbol">∀{</a><a id="11159" href="/Adequacy/#11159" class="Bound">Γ</a><a id="11160" class="Symbol">}{</a><a id="11162" href="/Adequacy/#11162" class="Bound">γ</a> <a id="11164" class="Symbol">:</a> <a id="11166" href="/Denotational/#7331" class="Function">Env</a> <a id="11170" href="/Adequacy/#11159" class="Bound">Γ</a><a id="11171" class="Symbol">}{</a><a id="11173" href="/Adequacy/#11173" class="Bound">γ&#39;</a> <a id="11176" class="Symbol">:</a> <a id="11178" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="11186" href="/Adequacy/#11159" class="Bound">Γ</a><a id="11187" class="Symbol">}{</a><a id="11189" href="/Adequacy/#11189" class="Bound">v</a> <a id="11191" href="/Adequacy/#11191" class="Bound">c</a><a id="11192" class="Symbol">}</a>
      <a id="11200" class="Symbol">→</a> <a id="11202" href="/Adequacy/#11046" class="Function">𝔾</a> <a id="11204" href="/Adequacy/#11162" class="Bound">γ</a> <a id="11206" href="/Adequacy/#11173" class="Bound">γ&#39;</a> <a id="11209" class="Symbol">→</a> <a id="11211" href="/Adequacy/#9302" class="Function">𝔼</a> <a id="11213" href="/Adequacy/#11189" class="Bound">v</a> <a id="11215" href="/Adequacy/#11191" class="Bound">c</a> <a id="11217" class="Symbol">→</a> <a id="11219" href="/Adequacy/#11046" class="Function">𝔾</a> <a id="11221" class="Symbol">(</a><a id="11222" href="/Adequacy/#11162" class="Bound">γ</a> <a id="11224" href="/Denotational/#7504" class="Function Operator">`,</a> <a id="11227" href="/Adequacy/#11189" class="Bound">v</a><a id="11228" class="Symbol">)</a> <a id="11230" class="Symbol">(</a><a id="11231" href="/Adequacy/#11173" class="Bound">γ&#39;</a> <a id="11234" href="/Adequacy/#6914" class="Function Operator">,&#39;</a> <a id="11237" href="/Adequacy/#11191" class="Bound">c</a><a id="11238" class="Symbol">)</a>
<a id="11240" href="/Adequacy/#11149" class="Function">𝔾-ext</a> <a id="11246" class="Symbol">{</a><a id="11247" href="/Adequacy/#11247" class="Bound">Γ</a><a id="11248" class="Symbol">}</a> <a id="11250" class="Symbol">{</a><a id="11251" href="/Adequacy/#11251" class="Bound">γ</a><a id="11252" class="Symbol">}</a> <a id="11254" class="Symbol">{</a><a id="11255" href="/Adequacy/#11255" class="Bound">γ&#39;</a><a id="11257" class="Symbol">}</a> <a id="11259" href="/Adequacy/#11259" class="Bound">g</a> <a id="11261" href="/Adequacy/#11261" class="Bound">e</a> <a id="11263" class="Symbol">{</a><a id="11264" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="11265" class="Symbol">}</a> <a id="11267" class="Symbol">=</a> <a id="11269" href="/Adequacy/#11261" class="Bound">e</a>
<a id="11271" href="/Adequacy/#11149" class="Function">𝔾-ext</a> <a id="11277" class="Symbol">{</a><a id="11278" href="/Adequacy/#11278" class="Bound">Γ</a><a id="11279" class="Symbol">}</a> <a id="11281" class="Symbol">{</a><a id="11282" href="/Adequacy/#11282" class="Bound">γ</a><a id="11283" class="Symbol">}</a> <a id="11285" class="Symbol">{</a><a id="11286" href="/Adequacy/#11286" class="Bound">γ&#39;</a><a id="11288" class="Symbol">}</a> <a id="11290" href="/Adequacy/#11290" class="Bound">g</a> <a id="11292" href="/Adequacy/#11292" class="Bound">e</a> <a id="11294" class="Symbol">{</a><a id="11295" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="11297" href="/Adequacy/#11297" class="Bound">x</a><a id="11298" class="Symbol">}</a> <a id="11300" class="Symbol">=</a> <a id="11302" href="/Adequacy/#11290" class="Bound">g</a></pre>

<p>We need a few properties of the <code class="highlighter-rouge">𝕍</code> and <code class="highlighter-rouge">𝔼</code> relations.  The first is that
a closure in the <code class="highlighter-rouge">𝕍</code> relation must be in weak-head normal form.  We
define WHNF has follows.</p>

<pre class="Agda"><a id="11498" class="Keyword">data</a> <a id="WHNF"></a><a id="11503" href="/Adequacy/#11503" class="Datatype">WHNF</a> <a id="11508" class="Symbol">:</a> <a id="11510" class="Symbol">∀</a> <a id="11512" class="Symbol">{</a><a id="11513" href="/Adequacy/#11513" class="Bound">Γ</a> <a id="11515" href="/Adequacy/#11515" class="Bound">A</a><a id="11516" class="Symbol">}</a> <a id="11518" class="Symbol">→</a> <a id="11520" href="/Adequacy/#11513" class="Bound">Γ</a> <a id="11522" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="11524" href="/Adequacy/#11515" class="Bound">A</a> <a id="11526" class="Symbol">→</a> <a id="11528" class="PrimitiveType">Set</a> <a id="11532" class="Keyword">where</a>
  <a id="WHNF.ƛ_"></a><a id="11540" href="/Adequacy/#11540" class="InductiveConstructor Operator">ƛ_</a> <a id="11543" class="Symbol">:</a> <a id="11545" class="Symbol">∀</a> <a id="11547" class="Symbol">{</a><a id="11548" href="/Adequacy/#11548" class="Bound">Γ</a><a id="11549" class="Symbol">}</a> <a id="11551" class="Symbol">{</a><a id="11552" href="/Adequacy/#11552" class="Bound">N</a> <a id="11554" class="Symbol">:</a> <a id="11556" href="/Adequacy/#11548" class="Bound">Γ</a> <a id="11558" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="11560" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="11562" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="11564" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="11565" class="Symbol">}</a>
     <a id="11572" class="Symbol">→</a> <a id="11574" href="/Adequacy/#11503" class="Datatype">WHNF</a> <a id="11579" class="Symbol">(</a><a id="11580" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="11582" href="/Adequacy/#11552" class="Bound">N</a><a id="11583" class="Symbol">)</a></pre>

<p>The proof goes by cases on the term in the closure.</p>

<pre class="Agda"><a id="𝕍→WHNF"></a><a id="11663" href="/Adequacy/#11663" class="Function">𝕍→WHNF</a> <a id="11670" class="Symbol">:</a> <a id="11672" class="Symbol">∀{</a><a id="11674" href="/Adequacy/#11674" class="Bound">Γ</a><a id="11675" class="Symbol">}{</a><a id="11677" href="/Adequacy/#11677" class="Bound">γ</a> <a id="11679" class="Symbol">:</a> <a id="11681" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="11689" href="/Adequacy/#11674" class="Bound">Γ</a><a id="11690" class="Symbol">}{</a><a id="11692" href="/Adequacy/#11692" class="Bound">M</a> <a id="11694" class="Symbol">:</a> <a id="11696" href="/Adequacy/#11674" class="Bound">Γ</a> <a id="11698" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="11700" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="11701" class="Symbol">}{</a><a id="11703" href="/Adequacy/#11703" class="Bound">v</a><a id="11704" class="Symbol">}</a>
       <a id="11713" class="Symbol">→</a> <a id="11715" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="11717" href="/Adequacy/#11703" class="Bound">v</a> <a id="11719" class="Symbol">(</a><a id="11720" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="11725" href="/Adequacy/#11692" class="Bound">M</a> <a id="11727" href="/Adequacy/#11677" class="Bound">γ</a><a id="11728" class="Symbol">)</a> <a id="11730" class="Symbol">→</a> <a id="11732" href="/Adequacy/#11503" class="Datatype">WHNF</a> <a id="11737" href="/Adequacy/#11692" class="Bound">M</a>
<a id="11739" href="/Adequacy/#11663" class="Function">𝕍→WHNF</a> <a id="11746" class="Symbol">{</a><a id="11747" class="Argument">M</a> <a id="11749" class="Symbol">=</a> <a id="11751" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="11753" href="/Adequacy/#11753" class="Bound">x</a><a id="11754" class="Symbol">}</a> <a id="11756" class="Symbol">{</a><a id="11757" href="/Adequacy/#11757" class="Bound">v</a><a id="11758" class="Symbol">}</a> <a id="11760" class="Symbol">()</a>
<a id="11763" href="/Adequacy/#11663" class="Function">𝕍→WHNF</a> <a id="11770" class="Symbol">{</a><a id="11771" class="Argument">M</a> <a id="11773" class="Symbol">=</a> <a id="11775" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="11777" href="/Adequacy/#11777" class="Bound">N</a><a id="11778" class="Symbol">}</a> <a id="11780" class="Symbol">{</a><a id="11781" href="/Adequacy/#11781" class="Bound">v</a><a id="11782" class="Symbol">}</a> <a id="11784" href="/Adequacy/#11784" class="Bound">vc</a> <a id="11787" class="Symbol">=</a> <a id="11789" href="/Adequacy/#11540" class="InductiveConstructor Operator">ƛ_</a>
<a id="11792" href="/Adequacy/#11663" class="Function">𝕍→WHNF</a> <a id="11799" class="Symbol">{</a><a id="11800" class="Argument">M</a> <a id="11802" class="Symbol">=</a> <a id="11804" href="/Adequacy/#11804" class="Bound">L</a> <a id="11806" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="11808" href="/Adequacy/#11808" class="Bound">M</a><a id="11809" class="Symbol">}</a> <a id="11811" class="Symbol">{</a><a id="11812" href="/Adequacy/#11812" class="Bound">v</a><a id="11813" class="Symbol">}</a> <a id="11815" class="Symbol">()</a></pre>

<p>Next we have an introduction rule for <code class="highlighter-rouge">𝕍</code> that mimics the <code class="highlighter-rouge">⊔-intro</code>
rule. If both <code class="highlighter-rouge">u</code> and <code class="highlighter-rouge">v</code> are related to a closure <code class="highlighter-rouge">c</code>, then their join is
too.</p>

<pre class="Agda"><a id="𝕍⊔-intro"></a><a id="11992" href="/Adequacy/#11992" class="Function">𝕍⊔-intro</a> <a id="12001" class="Symbol">:</a> <a id="12003" class="Symbol">∀{</a><a id="12005" href="/Adequacy/#12005" class="Bound">c</a> <a id="12007" href="/Adequacy/#12007" class="Bound">u</a> <a id="12009" href="/Adequacy/#12009" class="Bound">v</a><a id="12010" class="Symbol">}</a>
         <a id="12021" class="Symbol">→</a> <a id="12023" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="12025" href="/Adequacy/#12007" class="Bound">u</a> <a id="12027" href="/Adequacy/#12005" class="Bound">c</a> <a id="12029" class="Symbol">→</a> <a id="12031" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="12033" href="/Adequacy/#12009" class="Bound">v</a> <a id="12035" href="/Adequacy/#12005" class="Bound">c</a>
           <a id="12048" class="Comment">---------------</a>
         <a id="12073" class="Symbol">→</a> <a id="12075" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="12077" class="Symbol">(</a><a id="12078" href="/Adequacy/#12007" class="Bound">u</a> <a id="12080" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="12082" href="/Adequacy/#12009" class="Bound">v</a><a id="12083" class="Symbol">)</a> <a id="12085" href="/Adequacy/#12005" class="Bound">c</a>
<a id="12087" href="/Adequacy/#11992" class="Function">𝕍⊔-intro</a> <a id="12096" class="Symbol">{</a><a id="12097" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="12102" class="Symbol">(</a><a id="12103" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="12105" href="/Adequacy/#12105" class="Bound">x</a><a id="12106" class="Symbol">)</a> <a id="12108" href="/Adequacy/#12108" class="Bound">γ</a><a id="12109" class="Symbol">}</a> <a id="12111" class="Symbol">()</a> <a id="12114" href="/Adequacy/#12114" class="Bound">vc</a>
<a id="12117" href="/Adequacy/#11992" class="Function">𝕍⊔-intro</a> <a id="12126" class="Symbol">{</a><a id="12127" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="12132" class="Symbol">(</a><a id="12133" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="12135" href="/Adequacy/#12135" class="Bound">N</a><a id="12136" class="Symbol">)</a> <a id="12138" href="/Adequacy/#12138" class="Bound">γ</a><a id="12139" class="Symbol">}</a> <a id="12141" href="/Adequacy/#12141" class="Bound">uc</a> <a id="12144" href="/Adequacy/#12144" class="Bound">vc</a> <a id="12147" class="Symbol">=</a> <a id="12149" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="12151" href="/Adequacy/#12141" class="Bound">uc</a> <a id="12154" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="12156" href="/Adequacy/#12144" class="Bound">vc</a> <a id="12159" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="12161" href="/Adequacy/#11992" class="Function">𝕍⊔-intro</a> <a id="12170" class="Symbol">{</a><a id="12171" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="12176" class="Symbol">(</a><a id="12177" href="/Adequacy/#12177" class="Bound">L</a> <a id="12179" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="12181" href="/Adequacy/#12181" class="Bound">M</a><a id="12182" class="Symbol">)</a> <a id="12184" href="/Adequacy/#12184" class="Bound">γ</a><a id="12185" class="Symbol">}</a> <a id="12187" class="Symbol">()</a> <a id="12190" href="/Adequacy/#12190" class="Bound">vc</a></pre>

<p>In a moment we prove that <code class="highlighter-rouge">𝕍</code> is preserved when going from a greater
value to a lesser value: if <code class="highlighter-rouge">𝕍 v c</code> and <code class="highlighter-rouge">v' ⊑ v</code>, then <code class="highlighter-rouge">𝕍 v' c</code>.
This property, named <code class="highlighter-rouge">𝕍-sub</code>, is needed by the main lemma in
the case for the <code class="highlighter-rouge">sub</code> rule.</p>

<p>To prove <code class="highlighter-rouge">𝕍-sub</code>, we in turn need the following property concerning
values that are not greater than a function, that is, values that are
equivalent to <code class="highlighter-rouge">⊥</code>. In such cases, <code class="highlighter-rouge">𝕍 v (clos (ƛ N) γ')</code> is trivially true.</p>

<pre class="Agda"><a id="not-AboveFun-𝕍"></a><a id="12657" href="/Adequacy/#12657" class="Function">not-AboveFun-𝕍</a> <a id="12672" class="Symbol">:</a> <a id="12674" class="Symbol">∀{</a><a id="12676" href="/Adequacy/#12676" class="Bound">v</a> <a id="12678" class="Symbol">:</a> <a id="12680" href="/Denotational/#4097" class="Datatype">Value</a><a id="12685" class="Symbol">}{</a><a id="12687" href="/Adequacy/#12687" class="Bound">Γ</a><a id="12688" class="Symbol">}{</a><a id="12690" href="/Adequacy/#12690" class="Bound">γ&#39;</a> <a id="12693" class="Symbol">:</a> <a id="12695" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="12703" href="/Adequacy/#12687" class="Bound">Γ</a><a id="12704" class="Symbol">}{</a><a id="12706" href="/Adequacy/#12706" class="Bound">N</a> <a id="12708" class="Symbol">:</a> <a id="12710" href="/Adequacy/#12687" class="Bound">Γ</a> <a id="12712" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="12714" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="12716" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="12718" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="12720" class="Symbol">}</a>
    <a id="12726" class="Symbol">→</a> <a id="12728" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬</a> <a id="12730" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="12739" href="/Adequacy/#12676" class="Bound">v</a>
      <a id="12747" class="Comment">-------------------</a>
    <a id="12771" class="Symbol">→</a> <a id="12773" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="12775" href="/Adequacy/#12676" class="Bound">v</a> <a id="12777" class="Symbol">(</a><a id="12778" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="12783" class="Symbol">(</a><a id="12784" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="12786" href="/Adequacy/#12706" class="Bound">N</a><a id="12787" class="Symbol">)</a> <a id="12789" href="/Adequacy/#12690" class="Bound">γ&#39;</a><a id="12791" class="Symbol">)</a>
<a id="12793" href="/Adequacy/#12657" class="Function">not-AboveFun-𝕍</a> <a id="12808" class="Symbol">{</a><a id="12809" href="/Denotational/#4117" class="InductiveConstructor">⊥</a><a id="12810" class="Symbol">}</a> <a id="12812" href="/Adequacy/#12812" class="Bound">af</a> <a id="12815" class="Symbol">=</a> <a id="12817" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Unit.html#106" class="InductiveConstructor">tt</a>
<a id="12820" href="/Adequacy/#12657" class="Function">not-AboveFun-𝕍</a> <a id="12835" class="Symbol">{</a><a id="12836" href="/Adequacy/#12836" class="Bound">v</a> <a id="12838" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="12840" href="/Adequacy/#12840" class="Bound">v&#39;</a><a id="12842" class="Symbol">}</a> <a id="12844" href="/Adequacy/#12844" class="Bound">af</a> <a id="12847" class="Symbol">=</a> <a id="12849" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="12856" class="Symbol">(</a><a id="12857" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a> <a id="12871" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="12873" href="/Adequacy/#12836" class="Bound">v</a> <a id="12875" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="12877" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="12879" href="/Adequacy/#12840" class="Bound">v&#39;</a> <a id="12882" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="12884" href="/Denotational/#5638" class="Function">Refl⊑</a> <a id="12890" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="12892" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="12894" href="/Adequacy/#12844" class="Bound">af</a><a id="12896" class="Symbol">)</a>
<a id="12898" href="/Adequacy/#12657" class="Function">not-AboveFun-𝕍</a> <a id="12913" class="Symbol">{</a><a id="12914" href="/Adequacy/#12914" class="Bound">v₁</a> <a id="12917" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="12919" href="/Adequacy/#12919" class="Bound">v₂</a><a id="12921" class="Symbol">}</a> <a id="12923" href="/Adequacy/#12923" class="Bound">af</a>
    <a id="12930" class="Keyword">with</a> <a id="12935" href="/Adequacy/#5303" class="Function">not-AboveFun-⊔-inv</a> <a id="12954" href="/Adequacy/#12923" class="Bound">af</a>
<a id="12957" class="Symbol">...</a> <a id="12961" class="Symbol">|</a> <a id="12963" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="12965" href="/Adequacy/#12965" class="Bound">af1</a> <a id="12969" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="12971" href="/Adequacy/#12971" class="Bound">af2</a> <a id="12975" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="12977" class="Symbol">=</a> <a id="12979" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="12981" href="/Adequacy/#12657" class="Function">not-AboveFun-𝕍</a> <a id="12996" href="/Adequacy/#12965" class="Bound">af1</a> <a id="13000" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="13002" href="/Adequacy/#12657" class="Function">not-AboveFun-𝕍</a> <a id="13017" href="/Adequacy/#12971" class="Bound">af2</a> <a id="13021" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

<p>The proofs of <code class="highlighter-rouge">𝕍-sub</code> and <code class="highlighter-rouge">𝔼-sub</code> are intertwined.</p>

<pre class="Agda"><a id="sub-𝕍"></a><a id="13100" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13106" class="Symbol">:</a> <a id="13108" class="Symbol">∀{</a><a id="13110" href="/Adequacy/#13110" class="Bound">c</a> <a id="13112" class="Symbol">:</a> <a id="13114" href="/Adequacy/#6694" class="Datatype">Clos</a><a id="13118" class="Symbol">}{</a><a id="13120" href="/Adequacy/#13120" class="Bound">v</a> <a id="13122" href="/Adequacy/#13122" class="Bound">v&#39;</a><a id="13124" class="Symbol">}</a> <a id="13126" class="Symbol">→</a> <a id="13128" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="13130" href="/Adequacy/#13120" class="Bound">v</a> <a id="13132" href="/Adequacy/#13110" class="Bound">c</a> <a id="13134" class="Symbol">→</a> <a id="13136" href="/Adequacy/#13122" class="Bound">v&#39;</a> <a id="13139" href="/Denotational/#4468" class="Datatype Operator">⊑</a> <a id="13141" href="/Adequacy/#13120" class="Bound">v</a> <a id="13143" class="Symbol">→</a> <a id="13145" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="13147" href="/Adequacy/#13122" class="Bound">v&#39;</a> <a id="13150" href="/Adequacy/#13110" class="Bound">c</a>
<a id="sub-𝔼"></a><a id="13152" href="/Adequacy/#13152" class="Function">sub-𝔼</a> <a id="13158" class="Symbol">:</a> <a id="13160" class="Symbol">∀{</a><a id="13162" href="/Adequacy/#13162" class="Bound">c</a> <a id="13164" class="Symbol">:</a> <a id="13166" href="/Adequacy/#6694" class="Datatype">Clos</a><a id="13170" class="Symbol">}{</a><a id="13172" href="/Adequacy/#13172" class="Bound">v</a> <a id="13174" href="/Adequacy/#13174" class="Bound">v&#39;</a><a id="13176" class="Symbol">}</a> <a id="13178" class="Symbol">→</a> <a id="13180" href="/Adequacy/#9302" class="Function">𝔼</a> <a id="13182" href="/Adequacy/#13172" class="Bound">v</a> <a id="13184" href="/Adequacy/#13162" class="Bound">c</a> <a id="13186" class="Symbol">→</a> <a id="13188" href="/Adequacy/#13174" class="Bound">v&#39;</a> <a id="13191" href="/Denotational/#4468" class="Datatype Operator">⊑</a> <a id="13193" href="/Adequacy/#13172" class="Bound">v</a> <a id="13195" class="Symbol">→</a> <a id="13197" href="/Adequacy/#9302" class="Function">𝔼</a> <a id="13199" href="/Adequacy/#13174" class="Bound">v&#39;</a> <a id="13202" href="/Adequacy/#13162" class="Bound">c</a></pre>

<p>We prove <code class="highlighter-rouge">𝕍-sub</code> by case analysis on the closure’s term, to dispatch the
cases for variables and application. We then proceed by induction on
<code class="highlighter-rouge">v' ⊑ v</code>. We describe each case below.</p>

<pre class="Agda"><a id="13411" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13417" class="Symbol">{</a><a id="13418" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="13423" class="Symbol">(</a><a id="13424" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="13426" href="/Adequacy/#13426" class="Bound">x</a><a id="13427" class="Symbol">)</a> <a id="13429" href="/Adequacy/#13429" class="Bound">γ</a><a id="13430" class="Symbol">}</a> <a id="13432" class="Symbol">{</a><a id="13433" href="/Adequacy/#13433" class="Bound">v</a><a id="13434" class="Symbol">}</a> <a id="13436" class="Symbol">()</a> <a id="13439" href="/Adequacy/#13439" class="Bound">lt</a>
<a id="13442" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13448" class="Symbol">{</a><a id="13449" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="13454" class="Symbol">(</a><a id="13455" href="/Adequacy/#13455" class="Bound">L</a> <a id="13457" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="13459" href="/Adequacy/#13459" class="Bound">M</a><a id="13460" class="Symbol">)</a> <a id="13462" href="/Adequacy/#13462" class="Bound">γ</a><a id="13463" class="Symbol">}</a> <a id="13465" class="Symbol">()</a> <a id="13468" href="/Adequacy/#13468" class="Bound">lt</a>
<a id="13471" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13477" class="Symbol">{</a><a id="13478" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="13483" class="Symbol">(</a><a id="13484" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="13486" href="/Adequacy/#13486" class="Bound">N</a><a id="13487" class="Symbol">)</a> <a id="13489" href="/Adequacy/#13489" class="Bound">γ</a><a id="13490" class="Symbol">}</a> <a id="13492" href="/Adequacy/#13492" class="Bound">vc</a> <a id="13495" href="/Denotational/#4503" class="InductiveConstructor">Bot⊑</a> <a id="13500" class="Symbol">=</a> <a id="13502" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Unit.html#106" class="InductiveConstructor">tt</a>
<a id="13505" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13511" class="Symbol">{</a><a id="13512" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="13517" class="Symbol">(</a><a id="13518" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="13520" href="/Adequacy/#13520" class="Bound">N</a><a id="13521" class="Symbol">)</a> <a id="13523" href="/Adequacy/#13523" class="Bound">γ</a><a id="13524" class="Symbol">}</a> <a id="13526" href="/Adequacy/#13526" class="Bound">vc</a> <a id="13529" class="Symbol">(</a><a id="13530" href="/Denotational/#4527" class="InductiveConstructor">ConjL⊑</a> <a id="13537" href="/Adequacy/#13537" class="Bound">lt1</a> <a id="13541" href="/Adequacy/#13541" class="Bound">lt2</a><a id="13544" class="Symbol">)</a> <a id="13546" class="Symbol">=</a> <a id="13548" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="13550" class="Symbol">(</a><a id="13551" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13557" href="/Adequacy/#13526" class="Bound">vc</a> <a id="13560" href="/Adequacy/#13537" class="Bound">lt1</a><a id="13563" class="Symbol">)</a> <a id="13565" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="13567" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13573" href="/Adequacy/#13526" class="Bound">vc</a> <a id="13576" href="/Adequacy/#13541" class="Bound">lt2</a> <a id="13580" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="13582" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13588" class="Symbol">{</a><a id="13589" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="13594" class="Symbol">(</a><a id="13595" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="13597" href="/Adequacy/#13597" class="Bound">N</a><a id="13598" class="Symbol">)</a> <a id="13600" href="/Adequacy/#13600" class="Bound">γ</a><a id="13601" class="Symbol">}</a> <a id="13603" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="13605" href="/Adequacy/#13605" class="Bound">vv1</a> <a id="13609" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="13611" href="/Adequacy/#13611" class="Bound">vv2</a> <a id="13615" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="13617" class="Symbol">(</a><a id="13618" href="/Denotational/#4617" class="InductiveConstructor">ConjR1⊑</a> <a id="13626" href="/Adequacy/#13626" class="Bound">lt</a><a id="13628" class="Symbol">)</a> <a id="13630" class="Symbol">=</a> <a id="13632" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13638" href="/Adequacy/#13605" class="Bound">vv1</a> <a id="13642" href="/Adequacy/#13626" class="Bound">lt</a>
<a id="13645" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13651" class="Symbol">{</a><a id="13652" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="13657" class="Symbol">(</a><a id="13658" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="13660" href="/Adequacy/#13660" class="Bound">N</a><a id="13661" class="Symbol">)</a> <a id="13663" href="/Adequacy/#13663" class="Bound">γ</a><a id="13664" class="Symbol">}</a> <a id="13666" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="13668" href="/Adequacy/#13668" class="Bound">vv1</a> <a id="13672" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="13674" href="/Adequacy/#13674" class="Bound">vv2</a> <a id="13678" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="13680" class="Symbol">(</a><a id="13681" href="/Denotational/#4691" class="InductiveConstructor">ConjR2⊑</a> <a id="13689" href="/Adequacy/#13689" class="Bound">lt</a><a id="13691" class="Symbol">)</a> <a id="13693" class="Symbol">=</a> <a id="13695" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13701" href="/Adequacy/#13674" class="Bound">vv2</a> <a id="13705" href="/Adequacy/#13689" class="Bound">lt</a>
<a id="13708" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13714" class="Symbol">{</a><a id="13715" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="13720" class="Symbol">(</a><a id="13721" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="13723" href="/Adequacy/#13723" class="Bound">N</a><a id="13724" class="Symbol">)</a> <a id="13726" href="/Adequacy/#13726" class="Bound">γ</a><a id="13727" class="Symbol">}</a> <a id="13729" href="/Adequacy/#13729" class="Bound">vc</a> <a id="13732" class="Symbol">(</a><a id="13733" href="/Denotational/#4765" class="InductiveConstructor">Trans⊑</a><a id="13739" class="Symbol">{</a><a id="13740" class="Argument">v</a> <a id="13742" class="Symbol">=</a> <a id="13744" href="/Adequacy/#13744" class="Bound">v₂</a><a id="13746" class="Symbol">}</a> <a id="13748" href="/Adequacy/#13748" class="Bound">lt1</a> <a id="13752" href="/Adequacy/#13752" class="Bound">lt2</a><a id="13755" class="Symbol">)</a> <a id="13757" class="Symbol">=</a> <a id="13759" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13765" class="Symbol">(</a><a id="13766" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13772" href="/Adequacy/#13729" class="Bound">vc</a> <a id="13775" href="/Adequacy/#13752" class="Bound">lt2</a><a id="13778" class="Symbol">)</a> <a id="13780" href="/Adequacy/#13748" class="Bound">lt1</a>
<a id="13784" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13790" class="Symbol">{</a><a id="13791" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="13796" class="Symbol">(</a><a id="13797" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="13799" href="/Adequacy/#13799" class="Bound">N</a><a id="13800" class="Symbol">)</a> <a id="13802" href="/Adequacy/#13802" class="Bound">γ</a><a id="13803" class="Symbol">}</a> <a id="13805" href="/Adequacy/#13805" class="Bound">vc</a> <a id="13808" class="Symbol">(</a><a id="13809" href="/Denotational/#4839" class="InductiveConstructor">Fun⊑</a> <a id="13814" href="/Adequacy/#13814" class="Bound">lt1</a> <a id="13818" href="/Adequacy/#13818" class="Bound">lt2</a><a id="13821" class="Symbol">)</a> <a id="13823" href="/Adequacy/#13823" class="Bound">ev1</a> <a id="13827" href="/Adequacy/#13827" class="Bound">sf</a>
    <a id="13834" class="Keyword">with</a> <a id="13839" href="/Adequacy/#13805" class="Bound">vc</a> <a id="13842" class="Symbol">(</a><a id="13843" href="/Adequacy/#13152" class="Function">sub-𝔼</a> <a id="13849" href="/Adequacy/#13823" class="Bound">ev1</a> <a id="13853" href="/Adequacy/#13814" class="Bound">lt1</a><a id="13856" class="Symbol">)</a> <a id="13858" class="Symbol">(</a><a id="13859" href="/Adequacy/#3831" class="Function">AboveFun-⊑</a> <a id="13870" href="/Adequacy/#13827" class="Bound">sf</a> <a id="13873" href="/Adequacy/#13818" class="Bound">lt2</a><a id="13876" class="Symbol">)</a>
<a id="13878" class="Symbol">...</a> <a id="13882" class="Symbol">|</a> <a id="13884" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="13886" href="/Adequacy/#13886" class="Bound">c</a> <a id="13888" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="13890" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="13892" href="/Adequacy/#13892" class="Bound">Nc</a> <a id="13895" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="13897" href="/Adequacy/#13897" class="Bound">v4</a> <a id="13900" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="13902" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="13904" class="Symbol">=</a> <a id="13906" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="13908" href="/Adequacy/#13886" class="Bound">c</a> <a id="13910" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="13912" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="13914" href="/Adequacy/#13892" class="Bound">Nc</a> <a id="13917" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="13919" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13925" href="/Adequacy/#13897" class="Bound">v4</a> <a id="13928" class="Bound">lt2</a> <a id="13932" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="13934" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="13936" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="13942" class="Symbol">{</a><a id="13943" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="13948" class="Symbol">(</a><a id="13949" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="13951" href="/Adequacy/#13951" class="Bound">N</a><a id="13952" class="Symbol">)</a> <a id="13954" href="/Adequacy/#13954" class="Bound">γ</a><a id="13955" class="Symbol">}</a> <a id="13957" class="Symbol">{</a><a id="13958" href="/Adequacy/#13958" class="Bound">v</a> <a id="13960" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="13962" href="/Adequacy/#13962" class="Bound">w</a> <a id="13964" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="13966" href="/Adequacy/#13958" class="Bound">v</a> <a id="13968" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="13970" href="/Adequacy/#13970" class="Bound">w&#39;</a><a id="13972" class="Symbol">}</a> <a id="13974" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="13976" href="/Adequacy/#13976" class="Bound">vcw</a> <a id="13980" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="13982" href="/Adequacy/#13982" class="Bound">vcw&#39;</a> <a id="13987" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="13989" href="/Denotational/#4953" class="InductiveConstructor">Dist⊑</a> <a id="13995" href="/Adequacy/#13995" class="Bound">ev1c</a> <a id="14000" href="/Adequacy/#14000" class="Bound">sf</a>
    <a id="14007" class="Keyword">with</a> <a id="14012" href="/Adequacy/#5896" class="Function">AboveFun?</a> <a id="14022" href="/Adequacy/#13962" class="Bound">w</a> <a id="14024" class="Symbol">|</a> <a id="14026" href="/Adequacy/#5896" class="Function">AboveFun?</a> <a id="14036" href="/Adequacy/#13970" class="Bound">w&#39;</a>
<a id="14039" class="Symbol">...</a> <a id="14043" class="Symbol">|</a> <a id="14045" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="14049" href="/Adequacy/#14049" class="Bound">af2</a> <a id="14053" class="Symbol">|</a> <a id="14055" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="14059" href="/Adequacy/#14059" class="Bound">af3</a>
    <a id="14067" class="Keyword">with</a> <a id="14072" class="Bound">vcw</a> <a id="14076" class="Bound">ev1c</a> <a id="14081" href="/Adequacy/#14049" class="Bound">af2</a> <a id="14085" class="Symbol">|</a> <a id="14087" class="Bound">vcw&#39;</a> <a id="14092" class="Bound">ev1c</a> <a id="14097" href="/Adequacy/#14059" class="Bound">af3</a>
<a id="14101" class="Symbol">...</a> <a id="14105" class="Symbol">|</a> <a id="14107" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14109" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="14114" href="/Adequacy/#14114" class="Bound">L</a> <a id="14116" href="/Adequacy/#14116" class="Bound">δ</a> <a id="14118" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14120" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14122" href="/Adequacy/#14122" class="Bound">L⇓c₂</a> <a id="14127" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14129" href="/Adequacy/#14129" class="Bound">𝕍w</a> <a id="14132" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14134" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="14140" class="Symbol">|</a> <a id="14142" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14144" href="/Adequacy/#14144" class="Bound">c₃</a> <a id="14147" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14149" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14151" href="/Adequacy/#14151" class="Bound">L⇓c₃</a> <a id="14156" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14158" href="/Adequacy/#14158" class="Bound">𝕍w&#39;</a> <a id="14162" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14164" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14166" class="Keyword">rewrite</a> <a id="14174" href="/Adequacy/#8439" class="Function">⇓-determ</a> <a id="14183" href="/Adequacy/#14151" class="Bound">L⇓c₃</a> <a id="14188" href="/Adequacy/#14122" class="Bound">L⇓c₂</a> <a id="14193" class="Keyword">with</a> <a id="14198" href="/Adequacy/#11663" class="Function">𝕍→WHNF</a> <a id="14205" href="/Adequacy/#14129" class="Bound">𝕍w</a>
<a id="14208" class="Symbol">...</a> <a id="14212" class="Symbol">|</a> <a id="14214" href="/Adequacy/#11540" class="InductiveConstructor Operator">ƛ_</a> <a id="14217" class="Symbol">=</a>
      <a id="14225" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14227" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="14232" class="Bound">L</a> <a id="14234" class="Bound">δ</a> <a id="14236" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14238" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14240" class="Bound">L⇓c₂</a> <a id="14245" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14247" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14249" class="Bound">𝕍w</a> <a id="14252" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14254" class="Bound">𝕍w&#39;</a> <a id="14258" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14260" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14262" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="14264" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="14270" class="Symbol">{</a><a id="14271" href="/Adequacy/#14271" class="Bound">c</a><a id="14272" class="Symbol">}</a> <a id="14274" class="Symbol">{</a><a id="14275" href="/Adequacy/#14275" class="Bound">v</a> <a id="14277" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="14279" href="/Adequacy/#14279" class="Bound">w</a> <a id="14281" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="14283" href="/Adequacy/#14275" class="Bound">v</a> <a id="14285" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="14287" href="/Adequacy/#14287" class="Bound">w&#39;</a><a id="14289" class="Symbol">}</a> <a id="14291" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14293" href="/Adequacy/#14293" class="Bound">vcw</a> <a id="14297" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14299" href="/Adequacy/#14299" class="Bound">vcw&#39;</a> <a id="14304" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>  <a id="14307" href="/Denotational/#4953" class="InductiveConstructor">Dist⊑</a> <a id="14313" href="/Adequacy/#14313" class="Bound">ev1c</a> <a id="14318" href="/Adequacy/#14318" class="Bound">sf</a>
    <a id="14325" class="Symbol">|</a> <a id="14327" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="14331" href="/Adequacy/#14331" class="Bound">af2</a> <a id="14335" class="Symbol">|</a> <a id="14337" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="14340" href="/Adequacy/#14340" class="Bound">naf3</a>
    <a id="14349" class="Keyword">with</a> <a id="14354" href="/Adequacy/#14293" class="Bound">vcw</a> <a id="14358" href="/Adequacy/#14313" class="Bound">ev1c</a> <a id="14363" href="/Adequacy/#14331" class="Bound">af2</a>
<a id="14367" class="Symbol">...</a> <a id="14371" class="Symbol">|</a> <a id="14373" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14375" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="14380" class="Symbol">{</a><a id="14381" href="/Adequacy/#14381" class="Bound">Γ&#39;</a><a id="14383" class="Symbol">}</a> <a id="14385" href="/Adequacy/#14385" class="Bound">L</a> <a id="14387" href="/Adequacy/#14387" class="Bound">γ₁</a> <a id="14390" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14392" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14394" href="/Adequacy/#14394" class="Bound">L⇓c2</a> <a id="14399" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14401" href="/Adequacy/#14401" class="Bound">𝕍w</a> <a id="14404" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14406" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="14412" class="Keyword">with</a> <a id="14417" href="/Adequacy/#11663" class="Function">𝕍→WHNF</a> <a id="14424" href="/Adequacy/#14401" class="Bound">𝕍w</a>
<a id="14427" class="Symbol">...</a> <a id="14431" class="Symbol">|</a> <a id="14433" href="/Adequacy/#11540" class="InductiveConstructor Operator">ƛ_</a> <a id="14436" class="Symbol">{</a><a id="14437" class="Argument">N</a> <a id="14439" class="Symbol">=</a> <a id="14441" href="/Adequacy/#14441" class="Bound">N&#39;</a><a id="14443" class="Symbol">}</a> <a id="14445" class="Symbol">=</a>
      <a id="14453" class="Keyword">let</a> <a id="14457" href="/Adequacy/#14457" class="Bound">𝕍w&#39;</a> <a id="14461" class="Symbol">=</a> <a id="14463" href="/Adequacy/#12657" class="Function">not-AboveFun-𝕍</a><a id="14477" class="Symbol">{</a><a id="14478" class="Bound">w&#39;</a><a id="14480" class="Symbol">}{</a><a id="14482" class="Bound">Γ&#39;</a><a id="14484" class="Symbol">}{</a><a id="14486" class="Bound">γ₁</a><a id="14488" class="Symbol">}{</a><a id="14490" href="/Adequacy/#14441" class="Bound">N&#39;</a><a id="14492" class="Symbol">}</a> <a id="14494" class="Bound">naf3</a> <a id="14499" class="Keyword">in</a>
      <a id="14508" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14510" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="14515" class="Symbol">(</a><a id="14516" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="14518" href="/Adequacy/#14441" class="Bound">N&#39;</a><a id="14520" class="Symbol">)</a> <a id="14522" class="Bound">γ₁</a> <a id="14525" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14527" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14529" class="Bound">L⇓c2</a> <a id="14534" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14536" href="/Adequacy/#11992" class="Function">𝕍⊔-intro</a> <a id="14545" class="Bound">𝕍w</a> <a id="14548" href="/Adequacy/#14457" class="Bound">𝕍w&#39;</a> <a id="14552" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14554" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="14556" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="14562" class="Symbol">{</a><a id="14563" href="/Adequacy/#14563" class="Bound">c</a><a id="14564" class="Symbol">}</a> <a id="14566" class="Symbol">{</a><a id="14567" href="/Adequacy/#14567" class="Bound">v</a> <a id="14569" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="14571" href="/Adequacy/#14571" class="Bound">w</a> <a id="14573" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="14575" href="/Adequacy/#14567" class="Bound">v</a> <a id="14577" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="14579" href="/Adequacy/#14579" class="Bound">w&#39;</a><a id="14581" class="Symbol">}</a> <a id="14583" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14585" href="/Adequacy/#14585" class="Bound">vcw</a> <a id="14589" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14591" href="/Adequacy/#14591" class="Bound">vcw&#39;</a> <a id="14596" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14598" href="/Denotational/#4953" class="InductiveConstructor">Dist⊑</a> <a id="14604" href="/Adequacy/#14604" class="Bound">ev1c</a> <a id="14609" href="/Adequacy/#14609" class="Bound">sf</a>
    <a id="14616" class="Symbol">|</a> <a id="14618" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="14621" href="/Adequacy/#14621" class="Bound">naf2</a> <a id="14626" class="Symbol">|</a> <a id="14628" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="14632" href="/Adequacy/#14632" class="Bound">af3</a>
    <a id="14640" class="Keyword">with</a> <a id="14645" href="/Adequacy/#14591" class="Bound">vcw&#39;</a> <a id="14650" href="/Adequacy/#14604" class="Bound">ev1c</a> <a id="14655" href="/Adequacy/#14632" class="Bound">af3</a>
<a id="14659" class="Symbol">...</a> <a id="14663" class="Symbol">|</a> <a id="14665" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14667" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="14672" class="Symbol">{</a><a id="14673" href="/Adequacy/#14673" class="Bound">Γ&#39;</a><a id="14675" class="Symbol">}</a> <a id="14677" href="/Adequacy/#14677" class="Bound">L</a> <a id="14679" href="/Adequacy/#14679" class="Bound">γ₁</a> <a id="14682" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14684" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14686" href="/Adequacy/#14686" class="Bound">L⇓c3</a> <a id="14691" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14693" href="/Adequacy/#14693" class="Bound">𝕍w&#39;c</a> <a id="14698" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14700" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> 
    <a id="14707" class="Keyword">with</a> <a id="14712" href="/Adequacy/#11663" class="Function">𝕍→WHNF</a> <a id="14719" href="/Adequacy/#14693" class="Bound">𝕍w&#39;c</a>
<a id="14724" class="Symbol">...</a> <a id="14728" class="Symbol">|</a> <a id="14730" href="/Adequacy/#11540" class="InductiveConstructor Operator">ƛ_</a> <a id="14733" class="Symbol">{</a><a id="14734" class="Argument">N</a> <a id="14736" class="Symbol">=</a> <a id="14738" href="/Adequacy/#14738" class="Bound">N&#39;</a><a id="14740" class="Symbol">}</a> <a id="14742" class="Symbol">=</a>
      <a id="14750" class="Keyword">let</a> <a id="14754" href="/Adequacy/#14754" class="Bound">𝕍wc</a> <a id="14758" class="Symbol">=</a> <a id="14760" href="/Adequacy/#12657" class="Function">not-AboveFun-𝕍</a><a id="14774" class="Symbol">{</a><a id="14775" class="Bound">w</a><a id="14776" class="Symbol">}{</a><a id="14778" class="Bound">Γ&#39;</a><a id="14780" class="Symbol">}{</a><a id="14782" class="Bound">γ₁</a><a id="14784" class="Symbol">}{</a><a id="14786" href="/Adequacy/#14738" class="Bound">N&#39;</a><a id="14788" class="Symbol">}</a> <a id="14790" class="Bound">naf2</a> <a id="14795" class="Keyword">in</a>
      <a id="14804" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14806" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="14811" class="Symbol">(</a><a id="14812" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="14814" href="/Adequacy/#14738" class="Bound">N&#39;</a><a id="14816" class="Symbol">)</a> <a id="14818" class="Bound">γ₁</a> <a id="14821" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14823" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14825" class="Bound">L⇓c3</a> <a id="14830" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14832" href="/Adequacy/#11992" class="Function">𝕍⊔-intro</a> <a id="14841" href="/Adequacy/#14754" class="Bound">𝕍wc</a> <a id="14845" class="Bound">𝕍w&#39;c</a> <a id="14850" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14852" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="14854" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="14860" class="Symbol">{</a><a id="14861" href="/Adequacy/#14861" class="Bound">c</a><a id="14862" class="Symbol">}</a> <a id="14864" class="Symbol">{</a><a id="14865" href="/Adequacy/#14865" class="Bound">v</a> <a id="14867" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="14869" href="/Adequacy/#14869" class="Bound">w</a> <a id="14871" href="/Denotational/#4159" class="InductiveConstructor Operator">⊔</a> <a id="14873" href="/Adequacy/#14865" class="Bound">v</a> <a id="14875" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="14877" href="/Adequacy/#14877" class="Bound">w&#39;</a><a id="14879" class="Symbol">}</a> <a id="14881" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14883" href="/Adequacy/#14883" class="Bound">vcw</a> <a id="14887" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14889" href="/Adequacy/#14889" class="Bound">vcw&#39;</a> <a id="14894" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14896" href="/Denotational/#4953" class="InductiveConstructor">Dist⊑</a> <a id="14902" href="/Adequacy/#14902" class="Bound">ev1c</a> <a id="14907" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14909" href="/Adequacy/#14909" class="Bound">v&#39;</a> <a id="14912" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14914" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14916" href="/Adequacy/#14916" class="Bound">w&#39;&#39;</a> <a id="14920" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14922" href="/Adequacy/#14922" class="Bound">lt</a> <a id="14925" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14927" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="14933" class="Symbol">|</a> <a id="14935" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="14938" href="/Adequacy/#14938" class="Bound">naf2</a> <a id="14943" class="Symbol">|</a> <a id="14945" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="14948" href="/Adequacy/#14948" class="Bound">naf3</a>
    <a id="14957" class="Keyword">with</a> <a id="14962" href="/Adequacy/#4397" class="Function">AboveFun-⊔</a> <a id="14973" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14975" href="/Adequacy/#14909" class="Bound">v&#39;</a> <a id="14978" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14980" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="14982" href="/Adequacy/#14916" class="Bound">w&#39;&#39;</a> <a id="14986" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="14988" href="/Adequacy/#14922" class="Bound">lt</a> <a id="14991" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="14993" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="14995" class="Symbol">...</a> <a id="14999" class="Symbol">|</a> <a id="15001" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="15006" href="/Adequacy/#15006" class="Bound">af2</a> <a id="15010" class="Symbol">=</a> <a id="15012" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="15019" class="Symbol">(</a><a id="15020" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a> <a id="15034" href="/Adequacy/#15006" class="Bound">af2</a> <a id="15038" class="Bound">naf2</a><a id="15042" class="Symbol">)</a>
<a id="15044" class="Symbol">...</a> <a id="15048" class="Symbol">|</a> <a id="15050" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="15055" href="/Adequacy/#15055" class="Bound">af3</a> <a id="15059" class="Symbol">=</a> <a id="15061" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="15068" class="Symbol">(</a><a id="15069" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a> <a id="15083" href="/Adequacy/#15055" class="Bound">af3</a> <a id="15087" class="Bound">naf3</a><a id="15091" class="Symbol">)</a></pre>

<ul>
  <li>
    <p>Case <code class="highlighter-rouge">Bot⊑</code>. We immediately have <code class="highlighter-rouge">𝕍 ⊥ (clos (ƛ N) γ)</code>.</p>
  </li>
  <li>
    <p>Case <code class="highlighter-rouge">ConjL⊑</code>.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  v₁' ⊑ v     v₂' ⊑ v
  -------------------
  (v₁' ⊔ v₂') ⊑ v
</code></pre></div>    </div>

    <p>The induction hypotheses gives us <code class="highlighter-rouge">𝕍 v₁' (clos (ƛ N) γ)</code>
and <code class="highlighter-rouge">𝕍 v₂' (clos (ƛ N) γ)</code>, which is all we need for this case.</p>
  </li>
  <li>
    <p>Case <code class="highlighter-rouge">ConjR1⊑</code>.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  v' ⊑ v₁
  -------------
  v' ⊑ (v₁ ⊔ v₂)
</code></pre></div>    </div>

    <p>The induction hypothesis gives us <code class="highlighter-rouge">𝕍 v' (clos (ƛ N) γ)</code>.</p>
  </li>
  <li>
    <p>Case <code class="highlighter-rouge">ConjR2⊑</code>.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  v' ⊑ v₂
  -------------
  v' ⊑ (v₁ ⊔ v₂)
</code></pre></div>    </div>

    <p>Again, the induction hypothesis gives us <code class="highlighter-rouge">𝕍 v' (clos (ƛ N) γ)</code>.</p>
  </li>
  <li>
    <p>Case <code class="highlighter-rouge">Trans⊑</code>.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  v' ⊑ v₂   v₂ ⊑ v
  -----------------
       v' ⊑ v
</code></pre></div>    </div>

    <p>The induction hypothesis for <code class="highlighter-rouge">v₂ ⊑ v</code> gives us
<code class="highlighter-rouge">𝕍 v₂ (clos (ƛ N) γ)</code>. We apply the induction hypothesis
for <code class="highlighter-rouge">v' ⊑ v₂</code> to conclude that <code class="highlighter-rouge">𝕍 v' (clos (ƛ N) γ)</code>.</p>
  </li>
  <li>
    <p>Case <code class="highlighter-rouge">Dist⊑</code>. This case  is the most difficult. We have</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  𝕍 (v ↦ w) (clos (ƛ N) γ)
  𝕍 (v ↦ w') (clos (ƛ N) γ)
</code></pre></div>    </div>

    <p>and need to show that</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  𝕍 (v ↦ (w ⊔ w')) (clos (ƛ N) γ)
</code></pre></div>    </div>

    <p>Let <code class="highlighter-rouge">c</code> be an arbtrary closure such that <code class="highlighter-rouge">𝔼 v c</code>.
Assume <code class="highlighter-rouge">w ⊔ w'</code> is greater than a function.
Unfortunately, this does not mean that both <code class="highlighter-rouge">w</code> and <code class="highlighter-rouge">w'</code>
are above functions. But thanks to the lemma <code class="highlighter-rouge">AboveFun-⊔</code>,
we know that at least one of them is greater than a function.</p>

    <ul>
      <li>
        <p>Suppose both of them are greater than a function.  Then we have
<code class="highlighter-rouge">γ ⊢ N ⇓ clos L δ</code> and <code class="highlighter-rouge">𝕍 w (clos L δ)</code>.  We also have <code class="highlighter-rouge">γ ⊢ N ⇓ c₃</code> and
<code class="highlighter-rouge">𝕍 w' c₃</code>.  Because the big-step semantics is deterministic, we have
<code class="highlighter-rouge">c₃ ≡ clos L δ</code>. Also, from <code class="highlighter-rouge">𝕍 w (clos L δ)</code> we know that <code class="highlighter-rouge">L ≡ ƛ N'</code>
for some <code class="highlighter-rouge">N'</code>. We conclude that <code class="highlighter-rouge">𝕍 (w ⊔ w') (clos (ƛ N') δ)</code>.</p>
      </li>
      <li>
        <p>Suppose one of them is greater than a function and the other is
not: say <code class="highlighter-rouge">AboveFun w</code> and <code class="highlighter-rouge">¬ AboveFun w'</code>. Then from
<code class="highlighter-rouge">𝕍 (v ↦ w) (clos (ƛ N) γ)</code>
we have <code class="highlighter-rouge">γ ⊢ N ⇓ clos L γ₁</code> and <code class="highlighter-rouge">𝕍 w (clos L γ₁)</code>. From this we have
<code class="highlighter-rouge">L ≡ ƛ N'</code> for some <code class="highlighter-rouge">N'</code>. Meanwhile, from <code class="highlighter-rouge">¬ AboveFun w'</code> we have
<code class="highlighter-rouge">𝕍 w' (clos L γ₁)</code>. We conclude that
<code class="highlighter-rouge">𝕍 (w ⊔ w') (clos (ƛ N') γ₁)</code>.</p>
      </li>
    </ul>
  </li>
</ul>

<p>The proof of <code class="highlighter-rouge">sub-𝔼</code> is direct and explained below.</p>

<pre class="Agda"><a id="17218" href="/Adequacy/#13152" class="Function">sub-𝔼</a> <a id="17224" class="Symbol">{</a><a id="17225" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="17230" href="/Adequacy/#17230" class="Bound">M</a> <a id="17232" href="/Adequacy/#17232" class="Bound">γ</a><a id="17233" class="Symbol">}</a> <a id="17235" class="Symbol">{</a><a id="17236" href="/Adequacy/#17236" class="Bound">v</a><a id="17237" class="Symbol">}</a> <a id="17239" class="Symbol">{</a><a id="17240" href="/Adequacy/#17240" class="Bound">v&#39;</a><a id="17242" class="Symbol">}</a> <a id="17244" href="/Adequacy/#17244" class="Bound">𝔼v</a> <a id="17247" href="/Adequacy/#17247" class="Bound">v&#39;⊑v</a> <a id="17252" href="/Adequacy/#17252" class="Bound">fv&#39;</a>
    <a id="17260" class="Keyword">with</a> <a id="17265" href="/Adequacy/#17244" class="Bound">𝔼v</a> <a id="17268" class="Symbol">(</a><a id="17269" href="/Adequacy/#3831" class="Function">AboveFun-⊑</a> <a id="17280" href="/Adequacy/#17252" class="Bound">fv&#39;</a> <a id="17284" href="/Adequacy/#17247" class="Bound">v&#39;⊑v</a><a id="17288" class="Symbol">)</a>
<a id="17290" class="Symbol">...</a> <a id="17294" class="Symbol">|</a> <a id="17296" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="17298" href="/Adequacy/#17298" class="Bound">c</a> <a id="17300" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="17302" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="17304" href="/Adequacy/#17304" class="Bound">M⇓c</a> <a id="17308" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="17310" href="/Adequacy/#17310" class="Bound">𝕍v</a> <a id="17313" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="17315" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="17317" class="Symbol">=</a>
      <a id="17325" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="17327" href="/Adequacy/#17298" class="Bound">c</a> <a id="17329" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="17331" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="17333" href="/Adequacy/#17304" class="Bound">M⇓c</a> <a id="17337" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="17339" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="17345" href="/Adequacy/#17310" class="Bound">𝕍v</a> <a id="17348" class="Bound">v&#39;⊑v</a> <a id="17353" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="17355" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

<p>From <code class="highlighter-rouge">AboveFun v'</code> and <code class="highlighter-rouge">v' ⊑ v</code> we have <code class="highlighter-rouge">AboveFun v</code>.  Then with <code class="highlighter-rouge">𝔼 v c</code> we
obtain a closure <code class="highlighter-rouge">c</code> such that <code class="highlighter-rouge">γ ⊢ M ⇓ c</code> and <code class="highlighter-rouge">𝕍 v c</code>. We conclude with an
application of <code class="highlighter-rouge">sub-𝕍</code> with <code class="highlighter-rouge">v' ⊑ v</code> to show <code class="highlighter-rouge">𝕍 v' c</code>.</p>

<h2 id="programs-with-function-denotation-terminate-via-call-by-name">Programs with function denotation terminate via call-by-name</h2>

<p>The main lemma proves that if a term has a denotation that is above a
function, then it terminates via call-by-name. More formally, if
<code class="highlighter-rouge">γ ⊢ M ↓ v</code> and <code class="highlighter-rouge">𝔾 γ γ'</code>, then <code class="highlighter-rouge">𝔼 v (clos M γ')</code>. The proof is by
induction on the derivation of <code class="highlighter-rouge">γ ⊢ M ↓ v</code> we discuss each case below.</p>

<p>The following lemma, kth-x, is used in the case for the <code class="highlighter-rouge">var</code> rule.</p>

<pre class="Agda"><a id="kth-x"></a><a id="17998" href="/Adequacy/#17998" class="Function">kth-x</a> <a id="18004" class="Symbol">:</a> <a id="18006" class="Symbol">∀{</a><a id="18008" href="/Adequacy/#18008" class="Bound">Γ</a><a id="18009" class="Symbol">}{</a><a id="18011" href="/Adequacy/#18011" class="Bound">γ&#39;</a> <a id="18014" class="Symbol">:</a> <a id="18016" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="18024" href="/Adequacy/#18008" class="Bound">Γ</a><a id="18025" class="Symbol">}{</a><a id="18027" href="/Adequacy/#18027" class="Bound">x</a> <a id="18029" class="Symbol">:</a> <a id="18031" href="/Adequacy/#18008" class="Bound">Γ</a> <a id="18033" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="18035" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="18036" class="Symbol">}</a>
     <a id="18043" class="Symbol">→</a> <a id="18045" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="18048" href="/Adequacy/#18048" class="Bound">Δ</a> <a id="18050" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="18052" href="/Untyped/#2980" class="Datatype">Context</a> <a id="18060" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="18062" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="18065" href="/Adequacy/#18065" class="Bound">δ</a> <a id="18067" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="18069" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="18077" href="/Adequacy/#18048" class="Bound">Δ</a> <a id="18079" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="18081" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="18084" href="/Adequacy/#18084" class="Bound">M</a> <a id="18086" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="18088" href="/Adequacy/#18048" class="Bound">Δ</a> <a id="18090" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="18092" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="18094" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a>
                 <a id="18113" href="/Adequacy/#18011" class="Bound">γ&#39;</a> <a id="18116" href="/Adequacy/#18027" class="Bound">x</a> <a id="18118" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="18120" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="18125" href="/Adequacy/#18084" class="Bound">M</a> <a id="18127" href="/Adequacy/#18065" class="Bound">δ</a>
<a id="18129" href="/Adequacy/#17998" class="Function">kth-x</a><a id="18134" class="Symbol">{</a><a id="18135" class="Argument">γ&#39;</a> <a id="18138" class="Symbol">=</a> <a id="18140" href="/Adequacy/#18140" class="Bound">γ&#39;</a><a id="18142" class="Symbol">}{</a><a id="18144" class="Argument">x</a> <a id="18146" class="Symbol">=</a> <a id="18148" href="/Adequacy/#18148" class="Bound">x</a><a id="18149" class="Symbol">}</a> <a id="18151" class="Keyword">with</a> <a id="18156" href="/Adequacy/#18140" class="Bound">γ&#39;</a> <a id="18159" href="/Adequacy/#18148" class="Bound">x</a>
<a id="18161" class="Symbol">...</a> <a id="18165" class="Symbol">|</a> <a id="18167" href="/Adequacy/#6713" class="InductiveConstructor">clos</a><a id="18171" class="Symbol">{</a><a id="18172" class="Argument">Γ</a> <a id="18174" class="Symbol">=</a> <a id="18176" href="/Adequacy/#18176" class="Bound">Δ</a><a id="18177" class="Symbol">}</a> <a id="18179" href="/Adequacy/#18179" class="Bound">M</a> <a id="18181" href="/Adequacy/#18181" class="Bound">δ</a> <a id="18183" class="Symbol">=</a> <a id="18185" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18187" href="/Adequacy/#18176" class="Bound">Δ</a> <a id="18189" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18191" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18193" href="/Adequacy/#18181" class="Bound">δ</a> <a id="18195" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18197" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18199" href="/Adequacy/#18179" class="Bound">M</a> <a id="18201" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18203" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="18208" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18210" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18212" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

<pre class="Agda"><a id="↓→𝔼"></a><a id="18239" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="18243" class="Symbol">:</a> <a id="18245" class="Symbol">∀{</a><a id="18247" href="/Adequacy/#18247" class="Bound">Γ</a><a id="18248" class="Symbol">}{</a><a id="18250" href="/Adequacy/#18250" class="Bound">γ</a> <a id="18252" class="Symbol">:</a> <a id="18254" href="/Denotational/#7331" class="Function">Env</a> <a id="18258" href="/Adequacy/#18247" class="Bound">Γ</a><a id="18259" class="Symbol">}{</a><a id="18261" href="/Adequacy/#18261" class="Bound">γ&#39;</a> <a id="18264" class="Symbol">:</a> <a id="18266" href="/Adequacy/#6664" class="Function">ClosEnv</a> <a id="18274" href="/Adequacy/#18247" class="Bound">Γ</a><a id="18275" class="Symbol">}{</a><a id="18277" href="/Adequacy/#18277" class="Bound">M</a> <a id="18279" class="Symbol">:</a> <a id="18281" href="/Adequacy/#18247" class="Bound">Γ</a> <a id="18283" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="18285" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="18287" class="Symbol">}{</a><a id="18289" href="/Adequacy/#18289" class="Bound">v</a><a id="18290" class="Symbol">}</a>
            <a id="18304" class="Symbol">→</a> <a id="18306" href="/Adequacy/#11046" class="Function">𝔾</a> <a id="18308" href="/Adequacy/#18250" class="Bound">γ</a> <a id="18310" href="/Adequacy/#18261" class="Bound">γ&#39;</a> <a id="18313" class="Symbol">→</a> <a id="18315" href="/Adequacy/#18250" class="Bound">γ</a> <a id="18317" href="/Denotational/#9871" class="Datatype Operator">⊢</a> <a id="18319" href="/Adequacy/#18277" class="Bound">M</a> <a id="18321" href="/Denotational/#9871" class="Datatype Operator">↓</a> <a id="18323" href="/Adequacy/#18289" class="Bound">v</a> <a id="18325" class="Symbol">→</a> <a id="18327" href="/Adequacy/#9302" class="Function">𝔼</a> <a id="18329" href="/Adequacy/#18289" class="Bound">v</a> <a id="18331" class="Symbol">(</a><a id="18332" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="18337" href="/Adequacy/#18277" class="Bound">M</a> <a id="18339" href="/Adequacy/#18261" class="Bound">γ&#39;</a><a id="18341" class="Symbol">)</a>
<a id="18343" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="18347" class="Symbol">{</a><a id="18348" href="/Adequacy/#18348" class="Bound">Γ</a><a id="18349" class="Symbol">}</a> <a id="18351" class="Symbol">{</a><a id="18352" href="/Adequacy/#18352" class="Bound">γ</a><a id="18353" class="Symbol">}</a> <a id="18355" class="Symbol">{</a><a id="18356" href="/Adequacy/#18356" class="Bound">γ&#39;</a><a id="18358" class="Symbol">}</a> <a id="18360" href="/Adequacy/#18360" class="Bound">𝔾γγ&#39;</a> <a id="18365" class="Symbol">(</a><a id="18366" href="/Denotational/#9925" class="InductiveConstructor">var</a><a id="18369" class="Symbol">{</a><a id="18370" class="Argument">x</a> <a id="18372" class="Symbol">=</a> <a id="18374" href="/Adequacy/#18374" class="Bound">x</a><a id="18375" class="Symbol">})</a> <a id="18378" href="/Adequacy/#18378" class="Bound">fγx</a>
    <a id="18386" class="Keyword">with</a> <a id="18391" href="/Adequacy/#17998" class="Function">kth-x</a><a id="18396" class="Symbol">{</a><a id="18397" href="/Adequacy/#18348" class="Bound">Γ</a><a id="18398" class="Symbol">}{</a><a id="18400" href="/Adequacy/#18356" class="Bound">γ&#39;</a><a id="18402" class="Symbol">}{</a><a id="18404" href="/Adequacy/#18374" class="Bound">x</a><a id="18405" class="Symbol">}</a> <a id="18407" class="Symbol">|</a> <a id="18409" href="/Adequacy/#18360" class="Bound">𝔾γγ&#39;</a><a id="18413" class="Symbol">{</a><a id="18414" class="Argument">x</a> <a id="18416" class="Symbol">=</a> <a id="18418" href="/Adequacy/#18374" class="Bound">x</a><a id="18419" class="Symbol">}</a>
<a id="18421" class="Symbol">...</a> <a id="18425" class="Symbol">|</a> <a id="18427" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18429" href="/Adequacy/#18429" class="Bound">Δ</a> <a id="18431" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18433" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18435" href="/Adequacy/#18435" class="Bound">δ</a> <a id="18437" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18439" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18441" href="/Adequacy/#18441" class="Bound">M&#39;</a> <a id="18444" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18446" href="/Adequacy/#18446" class="Bound">eq</a> <a id="18449" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18451" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18453" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18455" class="Symbol">|</a> <a id="18457" href="/Adequacy/#18457" class="Bound">𝔾γγ&#39;x</a> <a id="18463" class="Keyword">rewrite</a> <a id="18471" href="/Adequacy/#18446" class="Bound">eq</a>
    <a id="18478" class="Keyword">with</a> <a id="18483" href="/Adequacy/#18457" class="Bound">𝔾γγ&#39;x</a> <a id="18489" class="Bound">fγx</a>
<a id="18493" class="Symbol">...</a> <a id="18497" class="Symbol">|</a> <a id="18499" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18501" href="/Adequacy/#18501" class="Bound">c</a> <a id="18503" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18505" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18507" href="/Adequacy/#18507" class="Bound">M&#39;⇓c</a> <a id="18512" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18514" href="/Adequacy/#18514" class="Bound">𝕍γx</a> <a id="18518" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18520" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18522" class="Symbol">=</a>
      <a id="18530" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18532" href="/Adequacy/#18501" class="Bound">c</a> <a id="18534" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18536" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18538" class="Symbol">(</a><a id="18539" href="/Adequacy/#7182" class="InductiveConstructor">⇓-var</a> <a id="18545" class="Bound">eq</a> <a id="18548" href="/Adequacy/#18507" class="Bound">M&#39;⇓c</a><a id="18552" class="Symbol">)</a> <a id="18554" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18556" href="/Adequacy/#18514" class="Bound">𝕍γx</a> <a id="18560" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18562" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="18564" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="18568" class="Symbol">{</a><a id="18569" href="/Adequacy/#18569" class="Bound">Γ</a><a id="18570" class="Symbol">}</a> <a id="18572" class="Symbol">{</a><a id="18573" href="/Adequacy/#18573" class="Bound">γ</a><a id="18574" class="Symbol">}</a> <a id="18576" class="Symbol">{</a><a id="18577" href="/Adequacy/#18577" class="Bound">γ&#39;</a><a id="18579" class="Symbol">}</a> <a id="18581" href="/Adequacy/#18581" class="Bound">𝔾γγ&#39;</a> <a id="18586" class="Symbol">(</a><a id="18587" href="/Denotational/#10004" class="InductiveConstructor">↦-elim</a><a id="18593" class="Symbol">{</a><a id="18594" class="Argument">L</a> <a id="18596" class="Symbol">=</a> <a id="18598" href="/Adequacy/#18598" class="Bound">L</a><a id="18599" class="Symbol">}{</a><a id="18601" class="Argument">M</a> <a id="18603" class="Symbol">=</a> <a id="18605" href="/Adequacy/#18605" class="Bound">M</a><a id="18606" class="Symbol">}{</a><a id="18608" class="Argument">v</a> <a id="18610" class="Symbol">=</a> <a id="18612" href="/Adequacy/#18612" class="Bound">v₁</a><a id="18614" class="Symbol">}{</a><a id="18616" class="Argument">w</a> <a id="18618" class="Symbol">=</a> <a id="18620" href="/Adequacy/#18620" class="Bound">v</a><a id="18621" class="Symbol">}</a> <a id="18623" href="/Adequacy/#18623" class="Bound">d₁</a> <a id="18626" href="/Adequacy/#18626" class="Bound">d₂</a><a id="18628" class="Symbol">)</a> <a id="18630" href="/Adequacy/#18630" class="Bound">fv</a>
    <a id="18637" class="Keyword">with</a> <a id="18642" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="18646" href="/Adequacy/#18581" class="Bound">𝔾γγ&#39;</a> <a id="18651" href="/Adequacy/#18623" class="Bound">d₁</a> <a id="18654" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18656" href="/Adequacy/#18612" class="Bound">v₁</a> <a id="18659" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18661" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18663" href="/Adequacy/#18620" class="Bound">v</a> <a id="18665" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18667" href="/Denotational/#5638" class="Function">Refl⊑</a> <a id="18673" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18675" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="18677" class="Symbol">...</a> <a id="18681" class="Symbol">|</a> <a id="18683" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18685" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="18690" href="/Adequacy/#18690" class="Bound">L&#39;</a> <a id="18693" href="/Adequacy/#18693" class="Bound">δ</a> <a id="18695" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18697" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18699" href="/Adequacy/#18699" class="Bound">L⇓L&#39;</a> <a id="18704" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18706" href="/Adequacy/#18706" class="Bound">𝕍v₁↦v</a> <a id="18712" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18714" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> 
    <a id="18721" class="Keyword">with</a> <a id="18726" href="/Adequacy/#11663" class="Function">𝕍→WHNF</a> <a id="18733" href="/Adequacy/#18706" class="Bound">𝕍v₁↦v</a>
<a id="18739" class="Symbol">...</a> <a id="18743" class="Symbol">|</a> <a id="18745" href="/Adequacy/#11540" class="InductiveConstructor Operator">ƛ_</a> <a id="18748" class="Symbol">{</a><a id="18749" class="Argument">N</a> <a id="18751" class="Symbol">=</a> <a id="18753" href="/Adequacy/#18753" class="Bound">N</a><a id="18754" class="Symbol">}</a> 
    <a id="18761" class="Keyword">with</a> <a id="18766" class="Bound">𝕍v₁↦v</a> <a id="18772" class="Symbol">{</a><a id="18773" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="18778" class="Bound">M</a> <a id="18780" class="Bound">γ&#39;</a><a id="18782" class="Symbol">}</a> <a id="18784" class="Symbol">(</a><a id="18785" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="18789" class="Bound">𝔾γγ&#39;</a> <a id="18794" class="Bound">d₂</a><a id="18796" class="Symbol">)</a> <a id="18798" class="Bound">fv</a>
<a id="18801" class="Symbol">...</a> <a id="18805" class="Symbol">|</a> <a id="18807" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18809" href="/Adequacy/#18809" class="Bound">c&#39;</a> <a id="18812" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18814" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18816" href="/Adequacy/#18816" class="Bound">N⇓c&#39;</a> <a id="18821" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18823" href="/Adequacy/#18823" class="Bound">𝕍v</a> <a id="18826" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18828" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18830" class="Symbol">=</a>
    <a id="18836" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18838" href="/Adequacy/#18809" class="Bound">c&#39;</a> <a id="18841" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18843" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18845" href="/Adequacy/#7424" class="InductiveConstructor">⇓-app</a> <a id="18851" class="Bound">L⇓L&#39;</a> <a id="18856" href="/Adequacy/#18816" class="Bound">N⇓c&#39;</a> <a id="18861" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18863" href="/Adequacy/#18823" class="Bound">𝕍v</a> <a id="18866" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18868" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="18870" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="18874" class="Symbol">{</a><a id="18875" href="/Adequacy/#18875" class="Bound">Γ</a><a id="18876" class="Symbol">}</a> <a id="18878" class="Symbol">{</a><a id="18879" href="/Adequacy/#18879" class="Bound">γ</a><a id="18880" class="Symbol">}</a> <a id="18882" class="Symbol">{</a><a id="18883" href="/Adequacy/#18883" class="Bound">γ&#39;</a><a id="18885" class="Symbol">}</a> <a id="18887" href="/Adequacy/#18887" class="Bound">𝔾γγ&#39;</a> <a id="18892" class="Symbol">(</a><a id="18893" href="/Denotational/#10142" class="InductiveConstructor">↦-intro</a><a id="18900" class="Symbol">{</a><a id="18901" class="Argument">N</a> <a id="18903" class="Symbol">=</a> <a id="18905" href="/Adequacy/#18905" class="Bound">N</a><a id="18906" class="Symbol">}{</a><a id="18908" class="Argument">v</a> <a id="18910" class="Symbol">=</a> <a id="18912" href="/Adequacy/#18912" class="Bound">v</a><a id="18913" class="Symbol">}{</a><a id="18915" class="Argument">w</a> <a id="18917" class="Symbol">=</a> <a id="18919" href="/Adequacy/#18919" class="Bound">w</a><a id="18920" class="Symbol">}</a> <a id="18922" href="/Adequacy/#18922" class="Bound">d</a><a id="18923" class="Symbol">)</a> <a id="18925" href="/Adequacy/#18925" class="Bound">fv↦w</a> <a id="18930" class="Symbol">=</a>
    <a id="18936" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18938" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="18943" class="Symbol">(</a><a id="18944" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="18946" href="/Adequacy/#18905" class="Bound">N</a><a id="18947" class="Symbol">)</a> <a id="18949" href="/Adequacy/#18883" class="Bound">γ&#39;</a> <a id="18952" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18954" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="18956" href="/Adequacy/#7345" class="InductiveConstructor">⇓-lam</a> <a id="18962" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="18964" href="/Adequacy/#18980" class="Function">E</a> <a id="18966" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="18968" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="18974" class="Keyword">where</a> <a id="18980" href="/Adequacy/#18980" class="Function">E</a> <a id="18982" class="Symbol">:</a> <a id="18984" class="Symbol">{</a><a id="18985" href="/Adequacy/#18985" class="Bound">c</a> <a id="18987" class="Symbol">:</a> <a id="18989" href="/Adequacy/#6694" class="Datatype">Clos</a><a id="18993" class="Symbol">}</a> <a id="18995" class="Symbol">→</a> <a id="18997" href="/Adequacy/#9302" class="Function">𝔼</a> <a id="18999" href="/Adequacy/#18912" class="Bound">v</a> <a id="19001" href="/Adequacy/#18985" class="Bound">c</a> <a id="19003" class="Symbol">→</a> <a id="19005" href="/Adequacy/#3646" class="Function">AboveFun</a> <a id="19014" href="/Adequacy/#18919" class="Bound">w</a>
            <a id="19028" class="Symbol">→</a> <a id="19030" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="19033" href="/Adequacy/#19033" class="Bound">c&#39;</a> <a id="19036" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="19038" href="/Adequacy/#6694" class="Datatype">Clos</a> <a id="19043" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="19045" class="Symbol">(</a><a id="19046" href="/Adequacy/#18883" class="Bound">γ&#39;</a> <a id="19049" href="/Adequacy/#6914" class="Function Operator">,&#39;</a> <a id="19052" href="/Adequacy/#18985" class="Bound">c</a><a id="19053" class="Symbol">)</a> <a id="19055" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="19057" href="/Adequacy/#18905" class="Bound">N</a> <a id="19059" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="19061" href="/Adequacy/#19033" class="Bound">c&#39;</a>  <a id="19065" href="https://agda.github.io/agda-stdlib/Data.Product.html#1353" class="Function Operator">×</a>  <a id="19068" href="/Adequacy/#9279" class="Function">𝕍</a> <a id="19070" href="/Adequacy/#18919" class="Bound">w</a> <a id="19072" href="/Adequacy/#19033" class="Bound">c&#39;</a>
          <a id="19085" href="/Adequacy/#18980" class="Function">E</a> <a id="19087" class="Symbol">{</a><a id="19088" href="/Adequacy/#19088" class="Bound">c</a><a id="19089" class="Symbol">}</a> <a id="19091" href="/Adequacy/#19091" class="Bound">𝔼vc</a> <a id="19095" href="/Adequacy/#19095" class="Bound">fw</a> <a id="19098" class="Symbol">=</a> <a id="19100" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="19104" class="Symbol">(λ</a> <a id="19107" class="Symbol">{</a><a id="19108" href="/Adequacy/#19108" class="Bound">x</a><a id="19109" class="Symbol">}</a> <a id="19111" class="Symbol">→</a> <a id="19113" href="/Adequacy/#11149" class="Function">𝔾-ext</a><a id="19118" class="Symbol">{</a><a id="19119" href="/Adequacy/#18875" class="Bound">Γ</a><a id="19120" class="Symbol">}{</a><a id="19122" href="/Adequacy/#18879" class="Bound">γ</a><a id="19123" class="Symbol">}{</a><a id="19125" href="/Adequacy/#18883" class="Bound">γ&#39;</a><a id="19127" class="Symbol">}</a> <a id="19129" href="/Adequacy/#18887" class="Bound">𝔾γγ&#39;</a> <a id="19134" href="/Adequacy/#19091" class="Bound">𝔼vc</a> <a id="19138" class="Symbol">{</a><a id="19139" href="/Adequacy/#19108" class="Bound">x</a><a id="19140" class="Symbol">})</a> <a id="19143" href="/Adequacy/#18922" class="Bound">d</a> <a id="19145" href="/Adequacy/#19095" class="Bound">fw</a>
<a id="19148" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="19152" href="/Adequacy/#19152" class="Bound">𝔾γγ&#39;</a> <a id="19157" href="/Denotational/#10266" class="InductiveConstructor">⊥-intro</a> <a id="19165" href="/Adequacy/#19165" class="Bound">f⊥</a> <a id="19168" class="Symbol">=</a> <a id="19170" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="19177" class="Symbol">(</a><a id="19178" href="/Adequacy/#4081" class="Function">AboveFun⊥</a> <a id="19188" href="/Adequacy/#19165" class="Bound">f⊥</a><a id="19190" class="Symbol">)</a>
<a id="19192" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="19196" href="/Adequacy/#19196" class="Bound">𝔾γγ&#39;</a> <a id="19201" class="Symbol">(</a><a id="19202" href="/Denotational/#10341" class="InductiveConstructor">⊔-intro</a><a id="19209" class="Symbol">{</a><a id="19210" class="Argument">v</a> <a id="19212" class="Symbol">=</a> <a id="19214" href="/Adequacy/#19214" class="Bound">v₁</a><a id="19216" class="Symbol">}{</a><a id="19218" class="Argument">w</a> <a id="19220" class="Symbol">=</a> <a id="19222" href="/Adequacy/#19222" class="Bound">v₂</a><a id="19224" class="Symbol">}</a> <a id="19226" href="/Adequacy/#19226" class="Bound">d₁</a> <a id="19229" href="/Adequacy/#19229" class="Bound">d₂</a><a id="19231" class="Symbol">)</a> <a id="19233" href="/Adequacy/#19233" class="Bound">fv12</a>
    <a id="19242" class="Keyword">with</a> <a id="19247" href="/Adequacy/#5896" class="Function">AboveFun?</a> <a id="19257" href="/Adequacy/#19214" class="Bound">v₁</a> <a id="19260" class="Symbol">|</a> <a id="19262" href="/Adequacy/#5896" class="Function">AboveFun?</a> <a id="19272" href="/Adequacy/#19222" class="Bound">v₂</a>
<a id="19275" class="Symbol">...</a> <a id="19279" class="Symbol">|</a> <a id="19281" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="19285" href="/Adequacy/#19285" class="Bound">fv1</a> <a id="19289" class="Symbol">|</a> <a id="19291" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="19295" href="/Adequacy/#19295" class="Bound">fv2</a>
    <a id="19303" class="Keyword">with</a> <a id="19308" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="19312" class="Bound">𝔾γγ&#39;</a> <a id="19317" class="Bound">d₁</a> <a id="19320" href="/Adequacy/#19285" class="Bound">fv1</a> <a id="19324" class="Symbol">|</a> <a id="19326" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="19330" class="Bound">𝔾γγ&#39;</a> <a id="19335" class="Bound">d₂</a> <a id="19338" href="/Adequacy/#19295" class="Bound">fv2</a> 
<a id="19343" class="Symbol">...</a> <a id="19347" class="Symbol">|</a> <a id="19349" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19351" href="/Adequacy/#19351" class="Bound">c₁</a> <a id="19354" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19356" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19358" href="/Adequacy/#19358" class="Bound">M⇓c₁</a> <a id="19363" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19365" href="/Adequacy/#19365" class="Bound">𝕍v₁</a> <a id="19369" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="19371" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="19373" class="Symbol">|</a> <a id="19375" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19377" href="/Adequacy/#19377" class="Bound">c₂</a> <a id="19380" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19382" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19384" href="/Adequacy/#19384" class="Bound">M⇓c₂</a> <a id="19389" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19391" href="/Adequacy/#19391" class="Bound">𝕍v₂</a> <a id="19395" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="19397" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="19403" class="Keyword">rewrite</a> <a id="19411" href="/Adequacy/#8439" class="Function">⇓-determ</a> <a id="19420" href="/Adequacy/#19384" class="Bound">M⇓c₂</a> <a id="19425" href="/Adequacy/#19358" class="Bound">M⇓c₁</a> <a id="19430" class="Symbol">=</a>
    <a id="19436" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19438" href="/Adequacy/#19351" class="Bound">c₁</a> <a id="19441" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19443" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19445" href="/Adequacy/#19358" class="Bound">M⇓c₁</a> <a id="19450" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19452" href="/Adequacy/#11992" class="Function">𝕍⊔-intro</a> <a id="19461" href="/Adequacy/#19365" class="Bound">𝕍v₁</a> <a id="19465" href="/Adequacy/#19391" class="Bound">𝕍v₂</a> <a id="19469" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="19471" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="19473" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="19477" href="/Adequacy/#19477" class="Bound">𝔾γγ&#39;</a> <a id="19482" class="Symbol">(</a><a id="19483" href="/Denotational/#10341" class="InductiveConstructor">⊔-intro</a><a id="19490" class="Symbol">{</a><a id="19491" class="Argument">v</a> <a id="19493" class="Symbol">=</a> <a id="19495" href="/Adequacy/#19495" class="Bound">v₁</a><a id="19497" class="Symbol">}{</a><a id="19499" class="Argument">w</a> <a id="19501" class="Symbol">=</a> <a id="19503" href="/Adequacy/#19503" class="Bound">v₂</a><a id="19505" class="Symbol">}</a> <a id="19507" href="/Adequacy/#19507" class="Bound">d₁</a> <a id="19510" href="/Adequacy/#19510" class="Bound">d₂</a><a id="19512" class="Symbol">)</a> <a id="19514" href="/Adequacy/#19514" class="Bound">fv12</a> <a id="19519" class="Symbol">|</a> <a id="19521" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="19525" href="/Adequacy/#19525" class="Bound">fv1</a> <a id="19529" class="Symbol">|</a> <a id="19531" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="19534" href="/Adequacy/#19534" class="Bound">nfv2</a>
    <a id="19543" class="Keyword">with</a> <a id="19548" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="19552" href="/Adequacy/#19477" class="Bound">𝔾γγ&#39;</a> <a id="19557" href="/Adequacy/#19507" class="Bound">d₁</a> <a id="19560" href="/Adequacy/#19525" class="Bound">fv1</a> 
<a id="19565" class="Symbol">...</a> <a id="19569" class="Symbol">|</a> <a id="19571" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19573" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="19578" class="Symbol">{</a><a id="19579" href="/Adequacy/#19579" class="Bound">Γ&#39;</a><a id="19581" class="Symbol">}</a> <a id="19583" href="/Adequacy/#19583" class="Bound">M&#39;</a> <a id="19586" href="/Adequacy/#19586" class="Bound">γ₁</a> <a id="19589" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19591" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19593" href="/Adequacy/#19593" class="Bound">M⇓c₁</a> <a id="19598" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19600" href="/Adequacy/#19600" class="Bound">𝕍v₁</a> <a id="19604" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="19606" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="19612" class="Keyword">with</a> <a id="19617" href="/Adequacy/#11663" class="Function">𝕍→WHNF</a> <a id="19624" href="/Adequacy/#19600" class="Bound">𝕍v₁</a>
<a id="19628" class="Symbol">...</a> <a id="19632" class="Symbol">|</a> <a id="19634" href="/Adequacy/#11540" class="InductiveConstructor Operator">ƛ_</a> <a id="19637" class="Symbol">{</a><a id="19638" class="Argument">N</a> <a id="19640" class="Symbol">=</a> <a id="19642" href="/Adequacy/#19642" class="Bound">N</a><a id="19643" class="Symbol">}</a> <a id="19645" class="Symbol">=</a>
    <a id="19651" class="Keyword">let</a> <a id="19655" href="/Adequacy/#19655" class="Bound">𝕍v₂</a> <a id="19659" class="Symbol">=</a> <a id="19661" href="/Adequacy/#12657" class="Function">not-AboveFun-𝕍</a><a id="19675" class="Symbol">{</a><a id="19676" class="Bound">v₂</a><a id="19678" class="Symbol">}{</a><a id="19680" class="Bound">Γ&#39;</a><a id="19682" class="Symbol">}{</a><a id="19684" class="Bound">γ₁</a><a id="19686" class="Symbol">}{</a><a id="19688" href="/Adequacy/#19642" class="Bound">N</a><a id="19689" class="Symbol">}</a> <a id="19691" class="Bound">nfv2</a> <a id="19696" class="Keyword">in</a>
    <a id="19703" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19705" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="19710" class="Symbol">(</a><a id="19711" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="19713" href="/Adequacy/#19642" class="Bound">N</a><a id="19714" class="Symbol">)</a> <a id="19716" class="Bound">γ₁</a> <a id="19719" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19721" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19723" class="Bound">M⇓c₁</a> <a id="19728" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19730" href="/Adequacy/#11992" class="Function">𝕍⊔-intro</a> <a id="19739" class="Bound">𝕍v₁</a> <a id="19743" href="/Adequacy/#19655" class="Bound">𝕍v₂</a> <a id="19747" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="19749" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="19751" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="19755" href="/Adequacy/#19755" class="Bound">𝔾γγ&#39;</a> <a id="19760" class="Symbol">(</a><a id="19761" href="/Denotational/#10341" class="InductiveConstructor">⊔-intro</a><a id="19768" class="Symbol">{</a><a id="19769" class="Argument">v</a> <a id="19771" class="Symbol">=</a> <a id="19773" href="/Adequacy/#19773" class="Bound">v₁</a><a id="19775" class="Symbol">}{</a><a id="19777" class="Argument">w</a> <a id="19779" class="Symbol">=</a> <a id="19781" href="/Adequacy/#19781" class="Bound">v₂</a><a id="19783" class="Symbol">}</a> <a id="19785" href="/Adequacy/#19785" class="Bound">d₁</a> <a id="19788" href="/Adequacy/#19788" class="Bound">d₂</a><a id="19790" class="Symbol">)</a> <a id="19792" href="/Adequacy/#19792" class="Bound">fv12</a> <a id="19797" class="Symbol">|</a> <a id="19799" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="19802" href="/Adequacy/#19802" class="Bound">nfv1</a>  <a id="19808" class="Symbol">|</a> <a id="19810" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#570" class="InductiveConstructor">yes</a> <a id="19814" href="/Adequacy/#19814" class="Bound">fv2</a>
    <a id="19822" class="Keyword">with</a> <a id="19827" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="19831" href="/Adequacy/#19755" class="Bound">𝔾γγ&#39;</a> <a id="19836" href="/Adequacy/#19788" class="Bound">d₂</a> <a id="19839" href="/Adequacy/#19814" class="Bound">fv2</a>
<a id="19843" class="Symbol">...</a> <a id="19847" class="Symbol">|</a> <a id="19849" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19851" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="19856" class="Symbol">{</a><a id="19857" href="/Adequacy/#19857" class="Bound">Γ&#39;</a><a id="19859" class="Symbol">}</a> <a id="19861" href="/Adequacy/#19861" class="Bound">M&#39;</a> <a id="19864" href="/Adequacy/#19864" class="Bound">γ₁</a> <a id="19867" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19869" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19871" href="/Adequacy/#19871" class="Bound">M&#39;⇓c₂</a> <a id="19877" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="19879" href="/Adequacy/#19879" class="Bound">𝕍2c</a> <a id="19883" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="19885" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
    <a id="19891" class="Keyword">with</a> <a id="19896" href="/Adequacy/#11663" class="Function">𝕍→WHNF</a> <a id="19903" href="/Adequacy/#19879" class="Bound">𝕍2c</a>
<a id="19907" class="Symbol">...</a> <a id="19911" class="Symbol">|</a> <a id="19913" href="/Adequacy/#11540" class="InductiveConstructor Operator">ƛ_</a> <a id="19916" class="Symbol">{</a><a id="19917" class="Argument">N</a> <a id="19919" class="Symbol">=</a> <a id="19921" href="/Adequacy/#19921" class="Bound">N</a><a id="19922" class="Symbol">}</a> <a id="19924" class="Symbol">=</a>
    <a id="19930" class="Keyword">let</a> <a id="19934" href="/Adequacy/#19934" class="Bound">𝕍1c</a> <a id="19938" class="Symbol">=</a> <a id="19940" href="/Adequacy/#12657" class="Function">not-AboveFun-𝕍</a><a id="19954" class="Symbol">{</a><a id="19955" class="Bound">v₁</a><a id="19957" class="Symbol">}{</a><a id="19959" class="Bound">Γ&#39;</a><a id="19961" class="Symbol">}{</a><a id="19963" class="Bound">γ₁</a><a id="19965" class="Symbol">}{</a><a id="19967" href="/Adequacy/#19921" class="Bound">N</a><a id="19968" class="Symbol">}</a> <a id="19970" class="Bound">nfv1</a> <a id="19975" class="Keyword">in</a>
    <a id="19982" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="19984" href="/Adequacy/#6713" class="InductiveConstructor">clos</a> <a id="19989" class="Symbol">(</a><a id="19990" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="19992" href="/Adequacy/#19921" class="Bound">N</a><a id="19993" class="Symbol">)</a> <a id="19995" class="Bound">γ₁</a> <a id="19998" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="20000" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="20002" class="Bound">M&#39;⇓c₂</a> <a id="20008" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="20010" href="/Adequacy/#11992" class="Function">𝕍⊔-intro</a> <a id="20019" href="/Adequacy/#19934" class="Bound">𝕍1c</a> <a id="20023" class="Bound">𝕍2c</a> <a id="20027" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="20029" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="20031" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="20035" href="/Adequacy/#20035" class="Bound">𝔾γγ&#39;</a> <a id="20040" class="Symbol">(</a><a id="20041" href="/Denotational/#10341" class="InductiveConstructor">⊔-intro</a> <a id="20049" href="/Adequacy/#20049" class="Bound">d₁</a> <a id="20052" href="/Adequacy/#20052" class="Bound">d₂</a><a id="20054" class="Symbol">)</a> <a id="20056" href="/Adequacy/#20056" class="Bound">fv12</a> <a id="20061" class="Symbol">|</a> <a id="20063" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="20066" href="/Adequacy/#20066" class="Bound">nfv1</a>  <a id="20072" class="Symbol">|</a> <a id="20074" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#597" class="InductiveConstructor">no</a> <a id="20077" href="/Adequacy/#20077" class="Bound">nfv2</a>
    <a id="20086" class="Keyword">with</a> <a id="20091" href="/Adequacy/#4397" class="Function">AboveFun-⊔</a> <a id="20102" href="/Adequacy/#20056" class="Bound">fv12</a>
<a id="20107" class="Symbol">...</a> <a id="20111" class="Symbol">|</a> <a id="20113" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#475" class="InductiveConstructor">inj₁</a> <a id="20118" href="/Adequacy/#20118" class="Bound">fv1</a> <a id="20122" class="Symbol">=</a> <a id="20124" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="20131" class="Symbol">(</a><a id="20132" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a> <a id="20146" href="/Adequacy/#20118" class="Bound">fv1</a> <a id="20150" class="Bound">nfv1</a><a id="20154" class="Symbol">)</a>
<a id="20156" class="Symbol">...</a> <a id="20160" class="Symbol">|</a> <a id="20162" href="https://agda.github.io/agda-stdlib/Data.Sum.Base.html#500" class="InductiveConstructor">inj₂</a> <a id="20167" href="/Adequacy/#20167" class="Bound">fv2</a> <a id="20171" class="Symbol">=</a> <a id="20173" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="20180" class="Symbol">(</a><a id="20181" href="https://agda.github.io/agda-stdlib/Relation.Nullary.Negation.html#560" class="Function">contradiction</a> <a id="20195" href="/Adequacy/#20167" class="Bound">fv2</a> <a id="20199" class="Bound">nfv2</a><a id="20203" class="Symbol">)</a>
<a id="20205" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="20209" class="Symbol">{</a><a id="20210" href="/Adequacy/#20210" class="Bound">Γ</a><a id="20211" class="Symbol">}</a> <a id="20213" class="Symbol">{</a><a id="20214" href="/Adequacy/#20214" class="Bound">γ</a><a id="20215" class="Symbol">}</a> <a id="20217" class="Symbol">{</a><a id="20218" href="/Adequacy/#20218" class="Bound">γ&#39;</a><a id="20220" class="Symbol">}</a> <a id="20222" class="Symbol">{</a><a id="20223" href="/Adequacy/#20223" class="Bound">M</a><a id="20224" class="Symbol">}</a> <a id="20226" class="Symbol">{</a><a id="20227" href="/Adequacy/#20227" class="Bound">v&#39;</a><a id="20229" class="Symbol">}</a> <a id="20231" href="/Adequacy/#20231" class="Bound">𝔾γγ&#39;</a> <a id="20236" class="Symbol">(</a><a id="20237" href="/Denotational/#10477" class="InductiveConstructor">sub</a><a id="20240" class="Symbol">{</a><a id="20241" class="Argument">v</a> <a id="20243" class="Symbol">=</a> <a id="20245" href="/Adequacy/#20245" class="Bound">v</a><a id="20246" class="Symbol">}</a> <a id="20248" href="/Adequacy/#20248" class="Bound">d</a> <a id="20250" href="/Adequacy/#20250" class="Bound">v&#39;⊑v</a><a id="20254" class="Symbol">)</a> <a id="20256" href="/Adequacy/#20256" class="Bound">fv&#39;</a>
    <a id="20264" class="Keyword">with</a> <a id="20269" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="20273" class="Symbol">{</a><a id="20274" href="/Adequacy/#20210" class="Bound">Γ</a><a id="20275" class="Symbol">}</a> <a id="20277" class="Symbol">{</a><a id="20278" href="/Adequacy/#20214" class="Bound">γ</a><a id="20279" class="Symbol">}</a> <a id="20281" class="Symbol">{</a><a id="20282" href="/Adequacy/#20218" class="Bound">γ&#39;</a><a id="20284" class="Symbol">}</a> <a id="20286" class="Symbol">{</a><a id="20287" href="/Adequacy/#20223" class="Bound">M</a><a id="20288" class="Symbol">}</a> <a id="20290" href="/Adequacy/#20231" class="Bound">𝔾γγ&#39;</a> <a id="20295" href="/Adequacy/#20248" class="Bound">d</a> <a id="20297" class="Symbol">(</a><a id="20298" href="/Adequacy/#3831" class="Function">AboveFun-⊑</a> <a id="20309" href="/Adequacy/#20256" class="Bound">fv&#39;</a> <a id="20313" href="/Adequacy/#20250" class="Bound">v&#39;⊑v</a><a id="20317" class="Symbol">)</a>
<a id="20319" class="Symbol">...</a> <a id="20323" class="Symbol">|</a> <a id="20325" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="20327" href="/Adequacy/#20327" class="Bound">c</a> <a id="20329" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="20331" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="20333" href="/Adequacy/#20333" class="Bound">M⇓c</a> <a id="20337" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="20339" href="/Adequacy/#20339" class="Bound">𝕍v</a> <a id="20342" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="20344" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="20346" class="Symbol">=</a>
      <a id="20354" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="20356" href="/Adequacy/#20327" class="Bound">c</a> <a id="20358" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="20360" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="20362" href="/Adequacy/#20333" class="Bound">M⇓c</a> <a id="20366" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="20368" href="/Adequacy/#13100" class="Function">sub-𝕍</a> <a id="20374" href="/Adequacy/#20339" class="Bound">𝕍v</a> <a id="20377" class="Bound">v&#39;⊑v</a> <a id="20382" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="20384" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

<ul>
  <li>
    <p>Case <code class="highlighter-rouge">var</code>. Looking up <code class="highlighter-rouge">x</code> in <code class="highlighter-rouge">γ'</code> yields some closure, <code class="highlighter-rouge">clos M' δ</code>,
and from <code class="highlighter-rouge">𝔾 γ γ'</code> we have <code class="highlighter-rouge">𝔼 (γ x) (clos M' δ)</code>. With the premise
<code class="highlighter-rouge">AboveFun (γ x)</code>, we obtain a closure <code class="highlighter-rouge">c</code> such that <code class="highlighter-rouge">δ ⊢ M' ⇓ c</code>
and <code class="highlighter-rouge">𝕍 (γ x) c</code>. To conclude <code class="highlighter-rouge">γ' ⊢ x ⇓ c</code> via <code class="highlighter-rouge">⇓-var</code>, we 
need <code class="highlighter-rouge">γ' x ≡ clos M' δ</code>, which is obvious, but it requires some
Agda shananigans via the <code class="highlighter-rouge">kth-x</code> lemma to get our hands on it.</p>
  </li>
  <li>
    <p>Case <code class="highlighter-rouge">↦-elim</code>. We have <code class="highlighter-rouge">γ ⊢ L · M ↓ v</code>.
The induction hypothesis for <code class="highlighter-rouge">γ ⊢ L ↓ v₁ ↦ v</code>
gives us <code class="highlighter-rouge">γ' ⊢ L ⇓ clos L' δ</code> and <code class="highlighter-rouge">𝕍 v (clos L' δ)</code>.
Of course, <code class="highlighter-rouge">L' ≡ ƛ N</code> for some <code class="highlighter-rouge">N</code>.
By the induction hypothesis for <code class="highlighter-rouge">γ ⊢ M ↓ v₁</code>,
we have <code class="highlighter-rouge">𝔼 v₁ (clos M γ')</code>.
Together with the premise <code class="highlighter-rouge">AboveFun v</code> and <code class="highlighter-rouge">𝕍 v (clos L' δ)</code>,
we obtain a closure <code class="highlighter-rouge">c'</code> such that <code class="highlighter-rouge">δ ⊢ N ⇓ c'</code> and <code class="highlighter-rouge">𝕍 v c'</code>.
We conclude that <code class="highlighter-rouge">γ' ⊢ L · M ⇓ c'</code> by rule <code class="highlighter-rouge">⇓-app</code>.</p>
  </li>
  <li>
    <p>Case <code class="highlighter-rouge">↦-intro</code>. We have <code class="highlighter-rouge">γ ⊢ ƛ N ↓ v ↦ w</code>.
We immediately have <code class="highlighter-rouge">γ' ⊢ ƛ M ⇓ clos (ƛ M) γ'</code> by rule <code class="highlighter-rouge">⇓-lam</code>.
But we also need to prove <code class="highlighter-rouge">𝕍 (v ↦ w) (clos (ƛ N) γ')</code>.
Let <code class="highlighter-rouge">c</code> by an arbitrary closure such that <code class="highlighter-rouge">𝔼 v c</code>.
Suppose <code class="highlighter-rouge">v'</code> is greater than a function value.
We need to show that <code class="highlighter-rouge">γ' , c ⊢ N ⇓ c'</code> and <code class="highlighter-rouge">𝕍 v' c'</code> for some <code class="highlighter-rouge">c'</code>.
We prove this by the induction hypothesis for <code class="highlighter-rouge">γ , v ⊢ N ↓ v'</code>
but we must first show that <code class="highlighter-rouge">𝔾 (γ , v) (γ' , c)</code>. We prove
that by the lemma <code class="highlighter-rouge">𝔾-ext</code>, using facts <code class="highlighter-rouge">𝔾 γ γ'</code> and <code class="highlighter-rouge">𝔼 v c</code>.</p>
  </li>
  <li>
    <p>Case <code class="highlighter-rouge">⊥-intro</code>. We have the premise <code class="highlighter-rouge">AboveFun ⊥</code>, but that’s impossible.</p>
  </li>
  <li>
    <p>Case <code class="highlighter-rouge">⊔-intro</code>. We have <code class="highlighter-rouge">γ ⊢ M ↓ (v₁ ⊔ v₂)</code> and <code class="highlighter-rouge">AboveFun (v₁ ⊔ v₂)</code>
and need to show <code class="highlighter-rouge">γ' ⊢ M ↓ c</code> and <code class="highlighter-rouge">𝕍 (v₁ ⊔ v₂) c</code> for some <code class="highlighter-rouge">c</code>.
Again, by <code class="highlighter-rouge">AboveFun-⊔</code>, at least one of <code class="highlighter-rouge">v₁</code> or <code class="highlighter-rouge">v₂</code> is greater than
a function.</p>

    <ul>
      <li>
        <p>Suppose both <code class="highlighter-rouge">v₁</code> and <code class="highlighter-rouge">v₂</code> are greater than a function value.
By the induction hypotheses for <code class="highlighter-rouge">γ ⊢ M ↓ v₁</code> and <code class="highlighter-rouge">γ ⊢ M ↓ v₂</code>
we have <code class="highlighter-rouge">γ' ⊢ M ⇓ c₁</code>, <code class="highlighter-rouge">𝕍 v₁ c₁</code>, <code class="highlighter-rouge">γ' ⊢ M ⇓ c₂</code>, and <code class="highlighter-rouge">𝕍 v₂ c₂</code>
for some <code class="highlighter-rouge">c₁</code> and <code class="highlighter-rouge">c₂</code>. Because <code class="highlighter-rouge">⇓</code> is deterministic, we have <code class="highlighter-rouge">c₂ ≡ c₁</code>.
Then by <code class="highlighter-rouge">𝕍⊔-intro</code> we conclude that <code class="highlighter-rouge">𝕍 (v₁ ⊔ v₂) c₁</code>.</p>
      </li>
      <li>
        <p>Without loss of generality, suppose <code class="highlighter-rouge">v₁</code> is greater than a function
value but <code class="highlighter-rouge">v₂</code> is not.  By the induction hypotheses for <code class="highlighter-rouge">γ ⊢ M ↓ v₁</code>,
and using <code class="highlighter-rouge">𝕍→WHNF</code>, we have <code class="highlighter-rouge">γ' ⊢ M ⇓ clos (ƛ N) γ₁</code>
and <code class="highlighter-rouge">𝕍 v₁ (clos (ƛ N) γ₁)</code>.
Then because <code class="highlighter-rouge">v₂</code> is not greater than a function, we also have
<code class="highlighter-rouge">𝕍 v₂ (clos (ƛ N) γ₁)</code>. We conclude that <code class="highlighter-rouge">𝕍 (v₁ ⊔ v₂) (clos (ƛ N) γ₁)</code>.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Case <code class="highlighter-rouge">sub</code>. We have <code class="highlighter-rouge">γ ⊢ M ↓ v</code>, <code class="highlighter-rouge">v' ⊑ v</code>, and <code class="highlighter-rouge">AboveFun v'</code>.
We need to show that <code class="highlighter-rouge">γ' ⊢ M ⇓ c</code> and <code class="highlighter-rouge">𝕍 v' c</code> for some <code class="highlighter-rouge">c</code>.
We have <code class="highlighter-rouge">AboveFun v</code> by <code class="highlighter-rouge">AboveFun-⊑</code>,
so the induction hypothesis for <code class="highlighter-rouge">γ ⊢ M ↓ v</code> gives us a closure <code class="highlighter-rouge">c</code>
such that <code class="highlighter-rouge">γ' ⊢ M ⇓ c</code> and <code class="highlighter-rouge">𝕍 v c</code>. We conclude that <code class="highlighter-rouge">𝕍 v' c</code> by <code class="highlighter-rouge">sub-𝕍</code>.</p>
  </li>
</ul>

<h2 id="proof-of-denotational-adequacy">Proof of denotational adequacy</h2>

<p>The adequacy property is a corollary of the main lemma.
We have <code class="highlighter-rouge">∅ ⊢ ƛ N ↓ ⊥ ↦ ⊥</code>, so <code class="highlighter-rouge">ℰ M ≃ ℰ (ƛ N)</code>
gives us <code class="highlighter-rouge">∅ ⊢ M ↓ ⊥ ↦ ⊥</code>. Then the main lemma gives us
<code class="highlighter-rouge">∅ ⊢ M ⇓ c</code> for some <code class="highlighter-rouge">c</code>.</p>

<pre class="Agda"><a id="adequacy"></a><a id="23334" href="/Adequacy/#23334" class="Function">adequacy</a> <a id="23343" class="Symbol">:</a> <a id="23345" class="Symbol">∀{</a><a id="23347" href="/Adequacy/#23347" class="Bound">M</a> <a id="23349" class="Symbol">:</a> <a id="23351" href="/Untyped/#3002" class="InductiveConstructor">∅</a> <a id="23353" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="23355" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="23356" class="Symbol">}{</a><a id="23358" href="/Adequacy/#23358" class="Bound">N</a> <a id="23360" class="Symbol">:</a> <a id="23362" href="/Untyped/#3002" class="InductiveConstructor">∅</a> <a id="23364" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="23366" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="23368" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="23370" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="23371" class="Symbol">}</a>  <a id="23374" class="Symbol">→</a>  <a id="23377" href="/Denotational/#18349" class="Function">ℰ</a> <a id="23379" href="/Adequacy/#23347" class="Bound">M</a> <a id="23381" href="/Denotational/#18547" class="Function Operator">≃</a> <a id="23383" href="/Denotational/#18349" class="Function">ℰ</a> <a id="23385" class="Symbol">(</a><a id="23386" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="23388" href="/Adequacy/#23358" class="Bound">N</a><a id="23389" class="Symbol">)</a>
         <a id="23400" class="Symbol">→</a>  <a id="23403" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">Σ[</a> <a id="23406" href="/Adequacy/#23406" class="Bound">c</a> <a id="23408" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">∈</a> <a id="23410" href="/Adequacy/#6694" class="Datatype">Clos</a> <a id="23415" href="https://agda.github.io/agda-stdlib/Data.Product.html#764" class="Function">]</a> <a id="23417" href="/Adequacy/#6892" class="Function">∅&#39;</a> <a id="23420" href="/Adequacy/#7125" class="Datatype Operator">⊢</a> <a id="23422" href="/Adequacy/#23347" class="Bound">M</a> <a id="23424" href="/Adequacy/#7125" class="Datatype Operator">⇓</a> <a id="23426" href="/Adequacy/#23406" class="Bound">c</a>
<a id="23428" href="/Adequacy/#23334" class="Function">adequacy</a><a id="23436" class="Symbol">{</a><a id="23437" href="/Adequacy/#23437" class="Bound">M</a><a id="23438" class="Symbol">}{</a><a id="23440" href="/Adequacy/#23440" class="Bound">N</a><a id="23441" class="Symbol">}</a> <a id="23443" href="/Adequacy/#23443" class="Bound">eq</a>
    <a id="23450" class="Keyword">with</a> <a id="23455" href="/Adequacy/#18239" class="Function">↓→𝔼</a> <a id="23459" href="/Adequacy/#11125" class="Function">𝔾-∅</a> <a id="23463" class="Symbol">((</a><a id="23465" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="23471" class="Symbol">(</a><a id="23472" href="/Adequacy/#23443" class="Bound">eq</a> <a id="23475" href="/Denotational/#7471" class="Function">`∅</a> <a id="23478" class="Symbol">(</a><a id="23479" href="/Denotational/#4117" class="InductiveConstructor">⊥</a> <a id="23481" href="/Denotational/#4129" class="InductiveConstructor Operator">↦</a> <a id="23483" href="/Denotational/#4117" class="InductiveConstructor">⊥</a><a id="23484" class="Symbol">)))</a> <a id="23488" class="Symbol">(</a><a id="23489" href="/Denotational/#10142" class="InductiveConstructor">↦-intro</a> <a id="23497" href="/Denotational/#10266" class="InductiveConstructor">⊥-intro</a><a id="23504" class="Symbol">))</a>
                 <a id="23524" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="23526" href="/Denotational/#4117" class="InductiveConstructor">⊥</a> <a id="23528" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="23530" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="23532" href="/Denotational/#4117" class="InductiveConstructor">⊥</a> <a id="23534" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="23536" href="/Denotational/#5638" class="Function">Refl⊑</a> <a id="23542" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="23544" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a>
<a id="23546" class="Symbol">...</a> <a id="23550" class="Symbol">|</a> <a id="23552" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="23554" href="/Adequacy/#23554" class="Bound">c</a> <a id="23556" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="23558" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="23560" href="/Adequacy/#23560" class="Bound">M⇓c</a> <a id="23564" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="23566" href="/Adequacy/#23566" class="Bound">Vc</a> <a id="23569" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="23571" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a> <a id="23573" class="Symbol">=</a> <a id="23575" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟨</a> <a id="23577" href="/Adequacy/#23554" class="Bound">c</a> <a id="23579" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="23581" href="/Adequacy/#23560" class="Bound">M⇓c</a> <a id="23585" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">⟩</a></pre>

  </div>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/Soundness/">Prev</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/Adequacy.lagda">Source</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/Acknowledgements/">Next</a>
    
</p>


</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Programming Language Foundations in Agda
</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Philip Wadler</li>
          <li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wadler"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wadler</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wen Kokke</li>
          <li><a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wenkokke</span></a></li><li><a href="https://www.twitter.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">wenkokke</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>
<!-- Import jQuery -->
<script type="text/javascript" src="/assets/jquery.js"></script>

<!-- Script which allows for foldable code blocks -->
<script type="text/javascript">
 $('div.foldable pre').each(function(){
     var autoHeight = $(this).height();
     var lineHeight = parseFloat($(this).css('line-height'));

     var plus    = $("<div></div>");
     var horLine = $("<div></div>");
     var verLine = $("<div></div>");
     $(this).prepend(plus);
     plus.css({
         'position'         : 'relative',
         'float'            : 'right',
         'right'            : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'width'            : lineHeight,
         'height'           : lineHeight});
     verLine.css({
         'position'         : 'relative',
         'height'           : lineHeight,
         'width'            : '3px',
         'background-color' : '#C1E0FF'});
     horLine.css({
         'position'         : 'relative',
         'top'              : '-' + (0.5 * lineHeight + 1.5) + 'px',
         'left'             : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'height'           : '3px',
         'width'            : lineHeight,
         'background-color' : '#C1E0FF'});
     plus.append(verLine);
     plus.append(horLine);

     $(this).height(2.0 * lineHeight);
     $(this).css('overflow','hidden');

     $(this).click(function(){
         if ($(this).height() == autoHeight) {
             $(this).height(2.0 * lineHeight);
             plus.show();
         }
         else {
             $(this).height('auto');
             plus.hide();
         }
     });
 });
</script>

<!-- Import KaTeX -->
<script type="text/javascript" src="/assets/katex.js"></script>

<!-- Script which renders TeX using KaTeX -->
<script type="text/javascript">
 $("script[type='math/tex']").replaceWith(
     function(){
         var tex = $(this).text();
         return "<span class=\"inline-equation\">" +
                katex.renderToString(tex) +
                "</span>";
     });
 $("script[type='math/tex; mode=display']").replaceWith(
     function(){
         var tex = $(this).text().replace(/%.*?(\n|$)/g,"");
         return "<div class=\"equation\">" +
                katex.renderToString("\\displaystyle "+tex) +
                "</div>";
     });
</script>
</body>

</html>
